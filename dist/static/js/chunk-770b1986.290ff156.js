(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-770b1986"],{"23f7":function(e,t,a){"use strict";var n=a("5b5c"),s=a.n(n);s.a},"5b5c":function(e,t,a){},"811d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"car-search"},[e._v("\n  选择日期\n  "),a("el-date-picker",{staticClass:"date-picker",attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",clearable:!1},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v("\n  选择车辆\n  "),a("el-dropdown",{staticClass:"car-dropdown",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("el-button",{attrs:{plain:""}},[e._v("\n      "+e._s(e.carName)),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{staticClass:"no-padding no-border",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.nameList,function(t){return a("el-dropdown-item",{key:t.id,attrs:{command:t}},[e._v(e._s(t.veh_code))])}),1)],1),e._v(" "),"cs"==e.searchType?a("div",[e._v("\n    超速值\n    "),a("el-input",{staticClass:"search-small-input",attrs:{placeholder:"超速"},model:{value:e.speedNumInput,callback:function(t){e.speedNumInput=t},expression:"speedNumInput"}}),e._v("\n    超速时长\n    "),a("el-input",{staticClass:"car-name-input",attrs:{placeholder:"时长(小时)"},model:{value:e.speedTimeInput,callback:function(t){e.speedTimeInput=t},expression:"speedTimeInput"}})],1):"wz"==e.searchType?a("div",[e._v("\n    间隔\n    "),a("el-input",{staticClass:"search-small-input",attrs:{placeholder:"分钟"},model:{value:e.intervalInput,callback:function(t){e.intervalInput=t},expression:"intervalInput"}})],1):"tc"==e.searchType?a("div",[e._v("\n    时长\n    "),a("el-input",{staticClass:"search-small-input",attrs:{placeholder:"分钟"},model:{value:e.durationInput,callback:function(t){e.durationInput=t},expression:"durationInput"}})],1):"sbxx"==e.searchType?a("div",[e._v("\n    电量≤\n    "),a("el-input",{staticClass:"search-small-unit-input",attrs:{placeholder:"电量"},model:{value:e.power,callback:function(t){e.power=t},expression:"power"}}),e._v("\n    %\n  ")],1):"bjxx"==e.searchType?a("div",[e._v("\n    报警类型\n    "),a("el-dropdown",{staticClass:"car-dropdown",attrs:{trigger:"click"},on:{command:e.handleCommandAlarm}},[a("el-button",{attrs:{plain:""}},[e._v("\n        "+e._s(e.carAlarm)),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{staticClass:"no-padding no-border",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.alarmList,function(t){return a("el-dropdown-item",{key:t,attrs:{command:t}},[e._v(e._s(t))])}),1)],1)],1):e._e(),e._v(" "),a("el-button",{staticClass:"btn-search",attrs:{loading:e.searchLoading,type:"primary",round:""},on:{click:e.btnSearch}},[e._v("查询")]),e._v(" "),"lsgj"!==e.searchType?a("el-button",{staticClass:"el-button-default",attrs:{loading:e.downloadLoading,size:"mini",round:""},on:{click:e.btnExcel}},[e._v("导出Excel")]):e._e(),e._v(" "),e._t("default")],2)},s=[],i=(a("c5f6"),a("ed08")),r={name:"CarSearch",props:{searchType:{type:String,default:"xs"},nameList:{type:Array,default:null},tabIndex:{type:Number,default:0}},data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},time:[],carName:"选择车辆",carNameId:-1,speedNumInput:"",speedTimeInput:"",intervalInput:"",durationInput:"",power:"",carAlarm:"全部报警",alarmList:["全部报警","断电报警","超速报警","超时报警","区域报警"],searchLoading:!1,downloadLoading:!1,queryData:[]}},created:function(){var e=new Date,t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),1)).toLocaleString().slice(0,10),a=e;this.time.push(t),this.time.push(a)},methods:{handleCommand:function(e){this.carName=e.veh_code,this.carNameId=e.id},handleCommandAlarm:function(e){this.carAlarm=e},btnSearch:function(){var e="",t="",a="";if(null!==this.time)if(this.time.length>0&&(e=Object(i["c"])(this.time[0]),t=Object(i["c"])(this.time[1])),this.carNameId>0&&(a=this.carName),"lsgj"!==this.searchType||""!==a){var n={startTime:e,endTime:t,id:null,vehCode:a,pageNum:1,pageSize:5};switch(this.searchType){case"cs":this.queryData=Object.assign(n,{speedValue:this.speedNumInput,speedTime:this.speedTimeInput});break;case"wz":this.queryData=Object.assign(n,{intervalTime:this.intervalInput});break;case"tc":this.queryData=Object.assign(n,{intervalTime:this.durationInput});break;case"sbxx":this.queryData=Object.assign(n,{power:this.power});break;case"jy":this.queryData=Object.assign(n,{oilType:0});break;case"ly":this.queryData=Object.assign(n,{oilType:1});break;case"bjxx":this.queryData=Object.assign(n,{alarm:this.carAlarm});break;default:this.queryData=n;break}this.searchLoading=!0,this.$emit("search",this.tabIndex,this.queryData)}else this.$message({message:"请选择车辆",type:"warning",duration:3e3});else this.$message({message:"请选择日期",type:"warning",duration:3e3})},btnExcel:function(){this.downloadLoading=!0,this.$emit("excel",this.tabIndex,this.queryData)}}},c=r,l=(a("23f7"),a("2877")),o=Object(l["a"])(c,n,s,!1,null,null,null);t["default"]=o.exports}}]);
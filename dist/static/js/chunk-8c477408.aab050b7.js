(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c477408"],{"0d5e":function(t,e,a){"use strict";a.d(e,"b",function(){return o}),a.d(e,"c",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"a",function(){return l});var n=a("b775");function o(t,e){return Object(n["a"])({url:t,method:"get",params:e})}function s(t,e){return Object(n["a"])({url:t,method:"post",data:e})}function i(t,e){return Object(n["a"])({url:t,method:"put",data:e})}function l(t,e){return Object(n["a"])({url:t,method:"delete",data:e})}},"3df0":function(t,e,a){},"4e35":function(t,e,a){"use strict";var n=a("3df0"),o=a.n(n);o.a},cc38:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"traffic"},[a("div",{staticClass:"gaoj"},[a("div",{staticClass:"left"},[a("p",{staticStyle:{"padding-left":"20px","font-weight":"600"}},[t._v("今日告警"+t._s(t.gjing)+"次")]),t._v(" "),a("div",{staticClass:"ny"},[a("div",{staticClass:"first"},[a("p",{staticStyle:{"padding-left":"15px"}},[t._v("已确认")]),t._v(" "),a("p",{staticStyle:{"padding-left":"15px"}},[t._v(t._s(t.sure)+"次")])]),t._v(" "),a("div",{staticClass:"first"},[a("p",{staticStyle:{"padding-left":"15px"}},[t._v("已清除")]),t._v(" "),a("p",{staticStyle:{"padding-left":"15px"}},[t._v(t._s(t.clear)+"次")])])]),t._v(" "),a("div",{staticClass:"nya"},[a("div",{staticClass:"gjing"},[a("p",{staticStyle:{"padding-left":"15px"}},[t._v("未确认")]),t._v(" "),a("p",{staticStyle:{"padding-left":"15px"}},[t._v(t._s(t.nosure)+"次")])]),t._v(" "),a("div",{staticClass:"gjing"},[a("p",{staticStyle:{"padding-left":"15px"}},[t._v("未清除")]),t._v(" "),a("p",{staticStyle:{"padding-left":"15px"}},[t._v(t._s(t.noclear)+"次")])])])]),t._v(" "),a("div",{staticClass:"center"},[a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{"padding-left":"10px","font-weight":"600"}},[t._v("告警情况")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.seldata,expression:"seldata"}],staticClass:"sel",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.seldata=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("今日")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("昨日")])])]),t._v(" "),a("div",{staticStyle:{width:"100%",height:"112%","margin-top":"-8%","margin-left":"4%"},attrs:{id:"snowTurnover"}})]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"body"},[a("p",{staticClass:"jr"},[t._v("未清除告警信息")]),t._v(" "),a("div",{staticClass:"anniu"},[a("el-button",{staticClass:"btn-info",attrs:{type:"info",round:""},on:{click:function(e){return t.yqr(1)}}},[t._v("已确认")]),t._v(" "),a("el-button",{staticClass:"btn-info",attrs:{type:"info",round:""},on:{click:function(e){return t.yqr(0)}}},[t._v("取消确认")]),t._v(" "),a("el-button",{staticClass:"btn-info",attrs:{type:"info",round:""},on:{click:function(e){return t.qc()}}},[t._v("清除")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.arrdata,"tooltip-effect":"dark","header-cell-style":{background:"#edeff8",color:"#909399"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"级别",width:"120",prop:"event_levels"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:(e.row.event_levels,"color:black")},[t._v("\n            "+t._s(1==e.row.event_levels?"一般":"紧急")+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"confirm_state",label:"确认状态",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:(e.row.confirm_state,"color:black")},[t._v("\n            "+t._s(0==e.row.confirm_state?"未确认":"已确认")+"\n          ")])]}}]),model:{value:t.data.confirm_state,callback:function(e){t.$set(t.data,"confirm_state",e)},expression:"data.confirm_state"}}),t._v(" "),a("el-table-column",{attrs:{prop:"clear_state",label:"清除状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:(e.row.clear_state,"color:black")},[t._v("\n            "+t._s(0==e.row.clear_state?"未清除":"已清除")+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"source_name",label:"告警系统","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarm_name",label:"告警源","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarm_type_name",label:"告警类型","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarm_address",label:"告警位置","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"alarm_time",label:"告警时间",width:"170","show-overflow-tooltip":""}})],1),t._v(" "),a("el-pagination",{staticClass:"feny",attrs:{"current-page":t.cur,background:"","page-size":5,layout:"total, prev, pager, next, jumper",total:t.all},on:{"current-change":t.btnClick}})],1)])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right"},[a("p",{staticStyle:{"padding-left":"10px","font-weight":"600"}},[t._v("两天内告警处理统计")]),t._v(" "),a("div",{staticStyle:{width:"100%",height:"110%","margin-left":"4%","margin-top":"-6.5%"},attrs:{id:"snowTurnoveraa"}})])}],s=a("313e"),i=a.n(s),l=a("0d5e"),r={name:"About",data:function(){return{sure:0,clear:0,nosure:0,noclear:0,gjing:"",arrdata:[],multipleTable:[],arr:[],pagesize:3,pageNumber:2,all:0,cur:1,data:{},seldata:"1",open1:{color:["#8aa3ff"],tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:"<br>{b}:告警数量为{c}次"},xAxis:{type:"category",data:["0","2","4","6","8","10","12","14","16","18","20","22","24"]},yAxis:{type:"value",splitLine:{show:!1},axisLabel:{formatter:"{value} 次"}},series:[{data:[0,0,0,0,0,0,0,0,0,0,0,0],type:"line",smooth:!0}]},open2:{color:["#8aa3ff","#96bbf2","#c2d8ff","#e4e6ff","#ff999a","#ffdd65","#d4c0ff"],legend:{data:["告警数","已确认","已清除"]},tooltip:{trigger:"item",formatter:"{b}<br>{a}{c}次"},xAxis:{type:"category",data:["今日","昨日"]},yAxis:{type:"value",axisLabel:{formatter:"{value} 次"},splitLine:{show:!1}},series:[{type:"bar",name:"告警数",data:[]},{type:"bar",name:"已确认",data:[]},{type:"bar",name:"已清除",data:[]}]},zhdata:{},zh:!1,multipleSelection:[]}},computed:{},watch:{seldata:function(){this.open1.series[0].data=[0,0,0,0,0,0,0,0,0,0,0,0],this.jinzuoif()}},mounted:function(){this.snowTurnoveraa(),this.shua(),this.jinzuoif()},methods:{jinzuoif:function(){"1"===this.seldata?this.jin():this.zuo()},shua:function(){var t=this;Object(l["b"])("/alarmInfo/selectByIdAndClear",{cpid:this.$store.state.user.companyId,pageNum:t.cur-1,pageSize:5}).then(function(e){t.arrdata=e.content,t.all=e.totalElements}),Object(l["b"])("/alarmInfo/selectCountToday",{cpid:this.$store.state.user.companyId}).then(function(e){null!==e["所有告警"]?t.gjing=e["所有告警"]:t.gjing=0,null!==e["已确认"]?t.sure=e["已确认"]:t.sure=0,null!==e["已清除"]?t.clear=e["已清除"]:t.clear=0,null!==e["未确认"]?t.nosure=e["未确认"]:t.nosure=0,null!==e["未清除"]?t.noclear=e["未清除"]:t.noclear=0})},jin:function(){var t=this;Object(l["b"])("/alarmInfo/countTimeAndNumToday",{cpid:this.$store.state.user.companyId}).then(function(e){for(var a=0;a<t.open1.xAxis.data.length;a++)for(var n=0;n<e.length;n++)t.open1.xAxis.data[a]===e[n].c_hour&&(t.open1.series[0].data[a]=e[n].num);t.snowTurnover()})},zuo:function(){var t=this;Object(l["b"])("/alarmInfo/countTimeAndNumYesterday",{cpid:this.$store.state.user.companyId}).then(function(e){for(var a=0;a<t.open1.xAxis.data.length;a++)for(var n=0;n<e.length;n++)t.open1.xAxis.data[a]===e[n].c_hour&&(t.open1.series[0].data[a]=e[n].num);t.snowTurnover()})},handleSelectionChange:function(t){this.multipleSelection=t},btnClick:function(t){this.cur=t,this.shua()},clickok:function(){this.zh=!1,this.zhdata=[]},zhfa:function(t){console.log(t),this.zh=!0,this.zhdata=this.arr[t]},snowTurnover:function(){var t=i.a.init(document.getElementById("snowTurnover"));t.resize(),t.setOption(this.open1)},snowTurnoveraa:function(){var t=this,e=i.a.init(document.getElementById("snowTurnoveraa"));Object(l["b"])("/alarmInfo/selectCountYesterday",{cpid:this.$store.state.user.companyId}).then(function(a){t.open2.series[0].data[1]=a["所有告警"],t.open2.series[1].data[1]=a["已确认"],t.open2.series[2].data[1]=a["已清除"],console.log(111),Object(l["b"])("/alarmInfo/selectCountToday",{cpid:t.$store.state.user.companyId}).then(function(a){t.open2.series[0].data[0]=a["所有告警"],t.open2.series[1].data[0]=a["已确认"],t.open2.series[2].data[0]=a["已清除"],console.log(110),e.resize(),e.setOption(t.open2)})})},yqr:function(t){for(var e=this,a=[],n=0;n<e.multipleSelection.length;n++)a.push({aid:e.multipleSelection[n].id,confirmState:t+"",alarmAffirmTime:""});Object(l["c"])("/alarmInfo/batchUpdateState",a).then(function(t){e.shua()})},qc:function(){for(var t=this,e=[],a=0;a<t.multipleSelection.length;a++)e.push({aid:t.multipleSelection[a].id,clear_state:a+"",clearTime:""});Object(l["c"])("/alarmInfo/batchUpdateStateClear",e).then(function(e){t.shua()})}}},c=r,u=(a("d2a3"),a("4e35"),a("2877")),d=Object(u["a"])(c,n,o,!1,null,"cf615120",null);e["default"]=d.exports},d2a3:function(t,e,a){"use strict";var n=a("e0a0"),o=a.n(n);o.a},e0a0:function(t,e,a){}}]);
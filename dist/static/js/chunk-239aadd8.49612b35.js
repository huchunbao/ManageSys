(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-239aadd8"],{"0d5e":function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return r}),a.d(e,"a",function(){return l});var s=a("b775");function n(t,e){return Object(s["a"])({url:t,method:"get",params:e})}function i(t,e){return Object(s["a"])({url:t,method:"post",data:e})}function r(t,e){return Object(s["a"])({url:t,method:"put",data:e})}function l(t,e){return Object(s["a"])({url:t,method:"delete",data:e})}},5260:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"integral-wrapper"},[a("div",{staticClass:"tab_title click_change"},[a("ul",{staticClass:"tab_box"},t._l(t.tab,function(e,s){return a("li",{key:s,class:{active:s==t.default_bar},on:{click:function(e){return t.TabClick(s)}}},[a("div",{staticClass:"box_name"},[a("div",{staticClass:"title_name"},[t._v(t._s(e))]),t._v(" "),a("div",{staticClass:"show_bar"})])])}),0)]),t._v(" "),a("div",{staticClass:"layout_box"},[a("div",{staticClass:"top"},[a("div",{staticClass:"top_left"},[a("div",{staticClass:"top_left_left"},[a("div",{staticClass:"title"},[t._v(t._s(t.titles)+"预订数据分析")]),t._v(" "),a("div",{staticClass:"echarts left_ulbox"},[a("ul",{staticClass:"tops_box"},[a("li",[a("div",{staticClass:"names"},[t._v("下周"+t._s(t.titles)+"预定金额")]),t._v(" "),a("div",{staticClass:"price nums_box"},[t._v("\n                      "+t._s(t.nextweekIncome)),a("span",[t._v("  元")])])]),t._v(" "),a("li",[a("div",{staticClass:"names"},[t._v("同比")]),t._v(" "),a("div",{staticClass:"nums_box"},[t._v("\n                      "+t._s(t.nextweekSame)),a("span",[t._v("  %")])])]),t._v(" "),a("li",[a("div",{staticClass:"names"},[t._v("环比")]),t._v(" "),a("div",{staticClass:"nums_box"},[t._v("\n                      "+t._s(t.nextweekDis)),a("span",[t._v("  %")])])])]),t._v(" "),a("ul",{staticClass:"bottom_ulbox"},[a("li",[a("div",{staticClass:"names"},[t._v("未来一个月"+t._s(t.titles)+"预订金额")]),t._v(" "),a("div",{staticClass:"price nums_box"},[t._v("\n                      "+t._s(t.nextmonthIncome)),a("span",[t._v("  元")])])]),t._v(" "),a("li",[a("div",{staticClass:"names"},[t._v("同比")]),t._v(" "),a("div",{staticClass:"nums_box"},[t._v("\n                      "+t._s(t.nextmonthSame)),a("span",[t._v("  %")])])]),t._v(" "),a("li",[a("div",{staticClass:"names"},[t._v("环比")]),t._v(" "),a("div",{staticClass:"nums_box"},[t._v("\n                      "+t._s(t.nextmonthDis)),a("span",[t._v("  %")])])])])])]),t._v(" "),a("div",{staticClass:"top_left_right echarts"})]),t._v(" "),a("div",{staticClass:"top_right"},[a("div",{staticClass:"title"},[t._v("下周"+t._s(t.titles)+"各渠道预定金额占比")]),t._v(" "),a("div",{staticClass:"echarts echarts_box",staticStyle:{width:"100%",height:"100%","margin-top":"-15px"},attrs:{id:"echartsbox"}})])]),t._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"bottom_left"},[a("div",{staticClass:"title"},[t._v("未来一个月"+t._s(t.titles)+"预订趋势")]),t._v(" "),a("div",{staticClass:"echarts echarts_box ",staticStyle:{width:"100%",height:"100%","margin-top":"-15px"},attrs:{id:"futuretend"}})]),t._v(" "),a("div",{staticClass:"bottom_right"},["门票"===this.titles?a("div",{staticClass:"title"},[t._v("未来一个月"+t._s(t.titles)+"各渠道预定金额占比")]):t._e(),t._v(" "),"酒店"===this.titles?a("div",{staticClass:"title"},[t._v("本月酒店入住率统计")]):t._e(),t._v(" "),a("div",{staticClass:"echarts echarts_box",staticStyle:{width:"100%",height:"100%","margin-top":"-15px"},attrs:{id:"futuremoney"}})])])])])},n=[],i=(a("6b54"),a("ac6a"),a("28a5"),a("7f7f"),a("313e")),r=a.n(i),l=a("0d5e"),o={name:"reservation",data:function(){return{tab:["门票","酒店"],titles:"门票",default_bar:0,nextmonthIncome:"",nextmonthSame:"",nextmonthDis:"",nextweekIncome:"",nextweekSame:"",nextweekDis:"",data_hotel:null,data_tickets:null,days:[],nowdays:[],data1:[],data2:[],data3:[],data4:[],right1:[],right2:[],right3:[],right4:[]}},mounted:function(){for(var t=this.getNowFormatDate(),e=[],a=[],s=[],n=[],i=[],r=[],l=1;l<=t;l++)e.push(l),s.push(0),n.push(0),i.push(0),r.push(0);this.days=e,this.data1=s,this.data2=n,this.data3=i,this.data4=r;var o=this.GetDate(),d=(a=[],[]),c=[],h=[],u=[];for(l=1;l<=o;l++)a.push(l),d.push(0),c.push(0),h.push(0),u.push(0);this.nowdays=a,this.right1=d,this.right2=c,this.right3=h,this.right4=u,this.TabClick(0)},methods:{TabClick:function(t){this.default_bar=t;var e=this;0===t?(this.titles="门票",e.ticks()):1===t&&(this.titles="酒店",e.hotes())},ticks:function(){var t=this,e=this;this.$nextTick(function(){Object(l["b"])("income/findTicketList").then(function(a){if("SUCCESS"===a.msg){t.data_tickets=a.data;for(var s=t.data_tickets.sourceMap,n=[],i=[],r=[],l=[],o=0;o<s.length;o++)n.push(s[o].sourceName),r.push({value:0,name:s[o].sourceName}),l.push({value:0,name:s[o].sourceName}),i.push({name:s[o].sourceName,type:"line",data:s[o].sourceName});a=t.data_tickets.list;var d=r,c=n,h=i,u=n,m=e.days;u=n;var p=[],v=e.data1,f=e.data2,_=e.data3,x=e.data4,g=l,b=n;for(o=0;o<a.length;o++)if(a[o])if(8==a[o].dateYear)e.nextmonthIncome=a[o].nextmonthIncome?a[o].nextmonthIncome:0,e.nextmonthSame=a[o].nextmonthSame?a[o].nextmonthSame:0,e.nextmonthDis=a[o].nextmonthDis?a[o].nextmonthDis:0,e.nextweekIncome=a[o].nextweekIncome?a[o].nextweekIncome:0,e.nextweekSame=a[o].nextweekSame?a[o].nextweekSame:0,e.nextweekDis=a[o].nextweekDis?a[o].nextweekDis:0;else if(11==a[o].dateYear)for(var w=0;w<g.length;w++)g[w].name===a[o].sourceName&&(g[w].value=a[o].price);else if(9==a[o].dateYear&&1==a[o].sourceId)for(w=0;w<e.days.length;w++)parseInt(a[o].date.split(" ")[0].split("-")[2])===parseInt(e.days[w])&&(v[w]=a[o].price);else if(9==a[o].dateYear&&2==a[o].sourceId)for(w=0;w<e.days.length;w++)parseInt(a[o].date.split(" ")[0].split("-")[2])===parseInt(e.days[w])&&(f[w]=a[o].price);else if(9==a[o].dateYear&&3==a[o].sourceId)for(w=0;w<e.days.length;w++)parseInt(a[o].date.split(" ")[0].split("-")[2])===parseInt(e.days[w])&&(_[w]=a[o].price);else if(9==a[o].dateYear&&4==a[o].sourceId)for(w=0;w<e.days.length;w++)parseInt(a[o].date.split(" ")[0].split("-")[2])===parseInt(e.days[w])&&(x[w]=a[o].price);else if(10==a[o].dateYear)for(w=0;w<d.length;w++)d[w].name===a[o].sourceName&&(d[w].value=a[o].price);p=[v,f,_,x];for(o=0;o<h.length;o++)h[o].data=p[o];e.EchartsRing(c,d,"echartsbox"),e.FutureLine_trend(u,h,m,"futuretend","金额",{star:"",end:"日门票预定金额:"}),e.EchartsRing(b,g,"futuremoney")}})})},hotes:function(){var t=this,e=this;this.$nextTick(function(){Object(l["b"])("income/findHotelList").then(function(a){if("SUCCESS"===a.msg){e.data_hotel=a.data;for(var s=e.data_hotel.hotelMap,n=[],i=[],r=[],l=[],o=0;o<s.length;o++)n.push(s[o].hotelName),i.push({value:0,name:s[o].hotelName}),r.push({name:s[o].hotelName,type:"line",data:null}),l.push({name:s[o].hotelName,type:"line",data:null});a=t.data_hotel.list;for(var d=i,c=n,h=[],u=e.data1,m=e.data2,p=e.data3,v=e.data4,f=n,_=e.days,x=[],g=e.right1,b=e.right2,w=e.right3,y=e.right4,I=n,C=e.nowdays,k=0;k<a.length;k++)if(8===a[k].dateYear)e.nextmonthIncome=a[k].nextmonthIncome?a[k].nextmonthIncome:0,e.nextmonthSame=a[k].nextmonthSame?a[k].nextmonthSame:0,e.nextmonthDis=a[k].nextmonthDis?a[k].nextmonthDis:0,e.nextweekIncome=a[k].nextweekIncome?a[k].nextweekIncome:0,e.nextweekSame=a[k].nextweekSame?a[k].nextweekSame:0,e.nextweekDis=a[k].nextweekDis?a[k].nextweekDis:0;else if(11===a[k].dateYear)for(var S=0;S<d.length;S++)d[S].name==a[k].hotelName&&(d[S].value=a[k].price);else if(9===a[k].dateYear){if(1===a[k].sourceId)for(var D=0;D<e.days.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(u[D]=a[k].price);else if(2===a[k].sourceId)for(D=0;D<e.days.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(m[D]=a[k].price);else if(3===a[k].sourceId)for(D=0;D<e.days.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(p[D]=a[k].price);else if(4===a[k].sourceId)for(D=0;D<e.days.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(v[D]=a[k].price)}else if(1===a[k].dateYear)if(1===a[k].hotelId)for(D=0;D<e.nowdays.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(g[D]=a[k].price);else if(2===a[k].hotelId)for(D=0;D<e.nowdays.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(b[D]=a[k].price);else if(3===a[k].hotelId)for(D=0;D<e.nowdays.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(w[D]=a[k].price);else if(4===a[k].hotelId)for(D=0;D<e.nowdays.length;D++)parseInt(a[k].date.split(" ")[0].split("-")[2])==parseInt(e.days[D])&&(y[D]=a[k].price);h=[u,m,p,v],x=[g,b,w,y];for(var F=r,N=l,Y=0;Y<n.length;Y++)F[Y].data=h[Y],N[Y].data=x[Y];e.EchartsRing(c,d,"echartsbox"),e.FutureLine_trend(f,F,_,"futuretend","金额",{star:"",end:"日酒店预订:"}),e.FutureLine_trend(I,N,C,"futuremoney","百分比",{star:"",end:"日酒店入住率:"})}})})},EchartsRing:function(t,e,a){var s=r.a.init(document.getElementById(a)),n={title:{show:e.length<1&&t.length<1,textStyle:{color:"#909399",fontWeight:"normal",fontSize:14},text:"暂无数据",left:"center",top:"center"},tooltip:{trigger:"item",formatter:function(t){var e="";return e+=t.seriesName+"</br>"+t.marker+" "+t.data.name+" : "+t.data.value+"("+t.percent+"%)</br>",e}},legend:{orient:"vertical",icon:"circle",x:"80%",y:"center",data:t},color:["#89A2FF","#A2BCFF","#FF9F9C","#FFDC79"],series:[{name:"预订金额占比",type:"pie",center:["40%","55%"],radius:["30%","50%"],avoidLabelOverlap:!0,hoverAnimation:!0,labelLine:{normal:{show:!0,length:15}},label:{normal:{show:!0,formatter:function(t){var e="";return e+=t.data.value+"("+t.percent+"%)",e}},emphasis:{show:!0,textStyle:{}}},data:e}]};s.clear(),s.setOption(n),window.addEventListener("resize",function(t){s&&s.resize()})},FutureLine_trend:function(t,e,a,s,n,i){var l=["#89A2FF","#A2BCFF","#FF9F9C","#FFDC79"],o={title:{show:e.length<1&&t.length<1,textStyle:{color:"#909399",fontWeight:"normal",fontSize:14},text:"暂无数据",left:"center",top:"center"},grid:{left:"20",right:"70",bottom:"50"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter:function(t){var e="";return e=i.star+t[0].name+i.end+"</br>",t.forEach(function(t){e+=t.marker+" "+t.seriesName+" : "+t.value+"</br>"}),e}},legend:{left:100,top:30,data:t},color:l,xAxis:[{type:"category",name:"日期(日)",splitLine:{show:!1},data:a,axisPointer:{type:"line"},axisTick:{alignWithLabel:!0,show:!1}}],yAxis:[{type:"value",name:n,splitLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}"}}],series:e},d=r.a.init(document.getElementById(s));d.clear(),o.grid.left=this.getYWidth(Math.max.apply(null,o.series[0].data),Math.max.apply(null,o.series[0].data)),d.setOption(o),window.addEventListener("resize",function(){d&&d.resize()})},getNowFormatDate:function(){var t=new Date,e="-",a=t.getFullYear(),s=t.getMonth()+1,n=t.getDate();s>=1&&s<=9&&(s="0"+s),n>=0&&n<=9&&(n="0"+n);var i=a+e+s+e+n,r=i.split("-"),l=(a=r[0],s=r[1],r[2],new Date(a,s,0));l=l.getDate();var o=l;return o},GetDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=new Date(e,a,0);return s.getDate()},getYWidth:function(t,e){return(12*(t>e?t.toString().length:e.toString().length)).toString()}}},d=o,c=(a("ba26"),a("2877")),h=Object(c["a"])(d,s,n,!1,null,"2b5c274b",null);e["default"]=h.exports},"9fef":function(t,e,a){},ba26:function(t,e,a){"use strict";var s=a("9fef"),n=a.n(s);n.a}}]);
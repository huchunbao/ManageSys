{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-236ef502\"],{\"0d5e\":function(t,a,e){\"use strict\";e.d(a,\"b\",function(){return n}),e.d(a,\"c\",function(){return l}),e.d(a,\"d\",function(){return s}),e.d(a,\"a\",function(){return o});var i=e(\"b775\");function n(t,a){return Object(i[\"a\"])({url:t,method:\"get\",params:a})}function l(t,a){return Object(i[\"a\"])({url:t,method:\"post\",data:a})}function s(t,a){return Object(i[\"a\"])({url:t,method:\"put\",data:a})}function o(t,a){return Object(i[\"a\"])({url:t,method:\"delete\",data:a})}},\"74f5\":function(t,a,e){\"use strict\";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"routeinstall\"},[e(\"el-scrollbar\",{staticClass:\"scroll_box\",attrs:{tag:\"ul\"}},[e(\"div\",{staticClass:\"leftdiv\"},[e(\"div\",{staticClass:\"leftdiv_list title_name\"},[t._v(\"设备标记\")]),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"\\n        点位类型\\n        \"),t._v(\" \"),e(\"el-select\",{staticClass:\"elselect\",staticStyle:{float:\"right\"},attrs:{placeholder:\"请选择\"},on:{change:function(a){return t.qing()}},model:{value:t.value1,callback:function(a){t.value1=a},expression:\"value1\"}},t._l(t.option10,function(t){return e(\"el-option\",{key:t.value,attrs:{label:t.typeName,value:JSON.stringify(t)}})}),1)],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"\\n        点位名称\\n        \"),e(\"el-input\",{attrs:{placeholder:\"请输入内容\",disabled:t.new_built},model:{value:t.value2,callback:function(a){t.value2=a},expression:\"value2\"}})],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[t._v(\"\\n        点位备注\\n        \"),e(\"el-input\",{attrs:{placeholder:\"请输入内容\",disabled:t.new_built},model:{value:t.value3,callback:function(a){t.value3=a},expression:\"value3\"}})],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list instructions\"},[t._v(\"\\n        点位说明\\n        \"),e(\"el-input\",{staticClass:\"textarea\",attrs:{type:\"textarea\",maxlength:\"100\",rows:2,placeholder:\"请输入内容\",resize:\"none\",disabled:t.new_built},model:{value:t.value4,callback:function(a){t.value4=a},expression:\"value4\"}})],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"\\n        绑定设备\\n        \"),e(\"el-select\",{staticClass:\"elselect\",staticStyle:{float:\"right\"},attrs:{placeholder:\"请选择\",disabled:t.new_built},model:{value:t.value5,callback:function(a){t.value5=a},expression:\"value5\"}},t._l(t.attractions1,function(t,a){return e(\"el-option\",{key:a,attrs:{label:t.name,value:JSON.stringify(t)}})}),1)],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"\\n        绑定景点\\n        \"),e(\"el-select\",{staticClass:\"elselect\",staticStyle:{float:\"right\"},attrs:{placeholder:\"请选择\",disabled:t.new_built},model:{value:t.value6,callback:function(a){t.value6=a},expression:\"value6\"}},t._l(t.attractions2,function(t,a){return e(\"el-option\",{key:a,attrs:{label:t.pointName,value:JSON.stringify(t)}})}),1)],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"\\n        绑定场所\\n        \"),e(\"el-select\",{staticClass:\"elselect\",staticStyle:{float:\"right\"},attrs:{placeholder:\"请选择\",disabled:t.new_built},model:{value:t.value7,callback:function(a){t.value7=a},expression:\"value7\"}},t._l(t.attractions3,function(t,a){return e(\"el-option\",{key:a,attrs:{label:t.pointName,value:JSON.stringify(t)}})}),1)],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list location title_name\",staticStyle:{\"padding-left\":\"20px\"}},[t._v(\"\\n        位置信息\\n        \"),e(\"div\",{staticClass:\"blue_bar\"})]),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"经度\"),e(\"el-input\",{attrs:{placeholder:\"请输入内容\",disabled:t.new_built},model:{value:t.value8,callback:function(a){t.value8=a},expression:\"value8\"}})],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[e(\"div\",{staticClass:\"star\"},[t._v(\"*\")]),t._v(\"纬度\"),e(\"el-input\",{attrs:{placeholder:\"请输入内容\",disabled:t.new_built},model:{value:t.value9,callback:function(a){t.value9=a},expression:\"value9\"}})],1),t._v(\" \"),e(\"div\",{staticClass:\"leftdiv_list\"},[t.new_built?e(\"el-button\",{staticStyle:{float:\"left\",\"margin-left\":\"15%\"},attrs:{type:t.new_built?\"primary\":\"\",size:\"mini\",round:\"\"},on:{click:function(a){return t.new_building()}}},[t._v(\"新建\")]):t._e(),t._v(\" \"),t.new_built?t._e():e(\"el-button\",{staticStyle:{float:\"left\",\"margin-left\":\"15%\"},attrs:{type:\"primary\",size:\"mini\",round:\"\"},on:{click:function(a){t.new_built=!t.new_built}}},[t._v(\"取消\")]),t._v(\" \"),e(\"el-button\",{staticStyle:{float:\"right\",\"margin-right\":\"15%\"},attrs:{type:t.new_built?\"\":\"primary\",disabled:t.new_built,size:\"mini\",round:\"\"},on:{click:function(a){return t.ti()}}},[t._v(\"保存\")])],1)])]),t._v(\" \"),e(\"el-amap\",{staticClass:\"map map_box\",attrs:{vid:\"amap-vue\",\"map-style\":t.mapStyle1,zoom:t.zoom,center:t.center,events:t.events,\"amap-manager\":t.amapManager}},[t._l(t.markers,function(t,a){return e(\"el-amap-marker\",{key:a,attrs:{position:t.position,events:t.events,icon:t.icon,\"ext-data\":t,\"top-when-click\":\"true\",draggable:t.draggable,\"raise-on-drag\":t.raiseOnDrag}})}),t._v(\" \"),t.window?e(\"el-amap-info-window\",{attrs:{position:t.window.position,visible:t.window.visible,offset:t.window.offset}},[e(\"div\",{key:t.window.position[0]},[\"a\"!==t.markerid?e(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:t.edit_btn}},[t._v(\"编辑\")]):t._e(),t._v(\" \"),\"a\"!==t.markerid?e(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:t.delete_btn}},[t._v(\"删除\")]):t._e(),t._v(\" \"),\"a\"===t.markerid?e(\"el-button\",{attrs:{type:\"primary\",plain:\"\"},on:{click:t.delete_btn}},[t._v(\"取消\")]):t._e()],1)]):t._e()],2)],1)},n=[],l=(e(\"7f7f\"),e(\"ac6a\"),e(\"0d5e\")),s=e(\"8f9b\"),o=e.n(s),r=new o.a.AMapManager,d={name:\"Map\",data:function(){var t=this;return{zoom:16,center:[116.336496,39.942178],mapStyle1:\"amap://styles/whitesmoke\",activeName:\"qing\",tape:1,amapManager:r,value1:\"所有场所\",value2:\"\",value3:\"\",value4:\"\",value5:\"\",value6:\"\",value7:\"\",value8:\"\",value9:\"\",new_built:!0,new_marker:!1,new_marker_id:\"\",new_marker_save:!1,old_id:\"\",old_icon:\"\",olc_click:0,maps:null,data_all:null,markerid:\"\",events:{click:function(a){if(!1===t.new_built&&t.new_marker){var i={};t.new_marker=!1,i={position:[a.lnglat.lng,a.lnglat.lat],icon:e(\"dbbd\"),draggable:!1,extData:{id:\"a\",pointName:t.value2}},t.value8=a.lnglat.lng,t.value9=a.lnglat.lat,t.new_marker_id=\"a\",t.markerid=\"a\",t.markers.push(i),t.ups_load(t.markers)}else\"a\"!==t.markerid?t.$message({message:\"请先点击新建按钮\",type:\"warning\"}):(t.value8=a.lnglat.lng,t.value9=a.lnglat.lat,t.markers[t.markers.length-1].position=[a.lnglat.lng,a.lnglat.lat])}},overlayGroups:[],data:[],markers:[],windows:[],window:\"\",slotStyle:{padding:\"2px 8px\",color:\"#333\"},click_num:\"\",option:[{value:\"1\",label:\"游客中心\"},{value:\"2\",label:\"景点\"},{value:\"3\",label:\"休息区\"},{value:\"4\",label:\"观景台\"}],datas:[],attractions1:[],attractions2:[],attractions3:[],option10:[]}},computed:{open:function(){return this.value2&&this.value5&&this.value6&&this.value7&&this.value8&&this.value9}},watch:{data:function(){},new_built:function(){this.markerid=\"\",this.value2=\"\",this.value3=\"\",this.value4=\"\",this.value5=\"\",this.value6=\"\",this.qing()}},created:function(){window.handler=this.handler},mounted:function(){var t=this;Object(l[\"b\"])(\"/mngpoint/getpointtypeByProperties\",{cpid:this.$store.state.user.companyId,properties:3}).then(function(a){var e=t;t.option10=a.data;for(var i=0;i<e.option10.length;i++)e.option10[i].icon=\"http://192.168.1.32:8081/mngpoint/img/icon/\"+e.option10[i].url+\"?t=\"+(new Date).getTime();t.value1=JSON.stringify(a.data[0]),t.qing()}),Object(l[\"b\"])(\"/mngpoint/getPointInfoByTypeId\",{cpid:this.$store.state.user.companyId,typeid:1}).then(function(a){t.attractions2=a.data}),Object(l[\"b\"])(\"/mngpoint/getpointtypeByProperties\",{cpid:this.$store.state.user.companyId,properties:2}).then(function(a){t.attractions3=[];for(var e=0;e<a.data.length;e++)Object(l[\"b\"])(\"/mngpoint/getPointInfoByTypeId\",{cpid:t.$store.state.user.companyId,typeid:a.data[e].id}).then(function(a){for(var e=0;e<a.data.length;e++)t.attractions3.push(a.data[e])})}),this.shebei()},methods:{shebei:function(){var t=this;console.log(1232132),Object(l[\"b\"])(\"/camara/getAll\",{cpid:this.$store.state.user.companyId}).then(function(a){t.attractions1=a})},qing:function(){var t=this,a=this;Object(l[\"b\"])(\"/mngpoint/getPointInfoByTypeId\",{cpid:this.$store.state.user.companyId,typeid:JSON.parse(this.value1).id}).then(function(e){for(var i=[],n=0;n<e.data.length;n++){for(var l,s=0;s<a.option10.length;s++)a.option10[s].id===e.data[0].pointTypeId&&(l=a.option10[s].icon);i.push({icon:l,position:[e.data[n].mngPointLon,e.data[n].mngPointLat],id:e.data[n].id,pointName:e.data[n].pointName,remarks:e.data[n].remarks,pointType:\"景点\",mngPointLon:e.data[n].mngPointLon,mngPointLat:e.data[n].mngPointLat,label:e.data[n].placeName,name:e.data[n].pointName,path:[e.data[n].mngPointLon,e.data[n].mngPointLat],draggable:!1,extData:{id:e.data[n].id,pointName:e.data[n].pointName,remarks:e.data[n].remarks,pointType:\"景点\",mngPointLon:e.data[n].mngPointLon,mngPointLat:e.data[n].mngPointLat,label:e.data[n].placeName,name:e.data[n].pointName,path:[e.data[n].mngPointLon,e.data[n].mngPointLat]}})}t.data_all=i,t.ups_load(i)})},change:function(t){var a=this;null!==this.click_num&&void 0!==this.windows[this.click_num]&&(this.windows[this.click_num].visible=!1);var i=parseInt(t)-1,n={};this.option.forEach(function(t,a){i===a&&(n.label=t.label,n.value=i)});var l=[{value:\"1\",label:\"游客中心\",name:\"游客中心\",path:[116.337033,39.938723],icon:e(\"fde2\")},{value:\"2\",label:\"景点\",name:\"景点\",path:[116.333878,39.941471],icon:e(\"e2da\")}];a.ups_load(l)},ups_load:function(t){for(var a=[],i=[],n=this,l=function(l){o={position:t[l].position,icon:t[l].icon,draggable:!1,extData:t[l].extData,events:{click:function(t){\"a\"!==n.markerid&&!0===n.new_built?(n.markerid=t.target.Uh.extData.extData.id,n.windows.forEach(function(t){t.visible=!1}),n.window=n.windows[l],n.$nextTick(function(){n.window.visible=!0,n.window.position=n.markers[l].position}),n.value8=this.getPosition().lng,n.value9=this.getPosition().lat,n.value2=this.Uh.extData.extData.name,n.value3=this.Uh.extData.extData.pointName,n.value4=this.Uh.extData.extData.remarks,n.markers.forEach(function(t,a){t.extData.id===n.markerid?t.icon=e(\"dbbd\"):t.extData.id!==n.new_marker_id||n.new_marker_save?t.icon=JSON.parse(n.value1).icon:t.icon=\"\"})):(console.log(t),\"a\"===this.Uh.extData.extData.id&&(n.windows.forEach(function(t){t.visible=!1}),n.window=n.windows[l],n.$nextTick(function(){n.window.visible=!0,n.window.position=n.markers[l].position})))},dragstart:function(){n.window.visible=!1},dragging:function(){var t=this;n.value6=this.getPosition().lng,n.value7=this.getPosition().lat,n.markers.forEach(function(a,e){a.extData.id===n.markerid&&(a.position=[t.getPosition().lng,t.getPosition().lat])})}}},a.push(o),i.push({position:t[l].position,visible:!1,offset:[10,-20],closeWhenClickMap:!0})},s=0;s<t.length;s++){var o;l(s)}this.markers=a,this.data_all=a,this.windows=i},edit_btn:function(){var t=this;this.new_built=!1,this.click_map=2,this.markers.forEach(function(a){t.markerid===a.extData.id&&(a.draggable=!0,t.window={position:a.position,visible:!1,offset:[10,-20],closeWhenClickMap:!0})}),this.windows.forEach(function(t){t.visible=!1})},delete_btn:function(){var t=this,a=this;a.$confirm(\"a\"!==a.markerid?\"此操作将永久删除该文件, 是否继续?\":\"请确认是否取消\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(e){a.window.visible=!1,a.click_map=0,\"a\"!==a.markerid?Object(l[\"b\"])(\"/mngpoint/delPointInfo\",{id:a.markerid}).then(function(e){Object(l[\"c\"])(\"/camara/updpoint\",{pid:1*a.markerid,binding:0}).then(function(a){\"SUCCESS\"===a.msg?t.qing():t.$message({message:a.msg,type:\"warning\"})})}):t.qing(),a.markerid=\"\",a.value2=\"\",a.value3=\"\",a.value4=\"\",a.value5=\"\",a.value6=\"\",a.value7=\"\",a.value8=\"\",a.value9=\"\",a.new_built=!0})},ti:function(){var t=this;if(\"\"!==this.value1&&\"\"!==this.value2&&\"\"!==this.value5&&\"\"!==this.value6&&\"\"!==this.value7&&\"\"!==this.value8&&\"\"!==this.value9){this.new_built=!0,this.click_num&&(this.windows[this.click_num].visible=!1);var a={cpid:this.$store.state.user.companyId,pointTypeId:JSON.parse(this.value1).id,pointProperties:3,pointName:this.value2,remarks:this.value3,pointDescription:this.value4,equipmentId:JSON.parse(this.value5).pid,scenicSpotId:JSON.parse(this.value6).id,scenicSpotName:JSON.parse(this.value6).pointName,placeName:JSON.parse(this.value7).pointName,placeId:JSON.parse(this.value7).id,pointType:JSON.parse(this.value1).typeName,mngPointLon:this.value8,mngPointLat:this.value9};Object(l[\"c\"])(\"/mngpoint/savePointInfo\",a).then(function(e){Object(l[\"c\"])(\"/camara/updpoint\",{pid:1*a.equipmentId,binding:1}).then(function(a){t.qing(),t.shebei(),t.markerid=\"\",t.value2=\"\",t.value3=\"\",t.value4=\"\",t.value5=\"\",t.value6=\"\",t.value7=\"\",t.value8=\"\",t.value9=\"\",t.$message({message:\"保存成功\",type:\"success\"})})})}else this.$message({message:\"请认真检查填写项\",type:\"warning\"})},new_building:function(){var t=this,a=this;this.click_map=0,this.new_built=!1,this.new_marker=!0,this.window=!1,this.markers.forEach(function(a){t.old_icon&&a.extData.id===t.old_id&&(a.icon=t.old_icon)}),a.value2=\"\",a.value3=\"\",a.value4=\"\",a.value5=\"\",a.value6=\"\",a.value7=\"\",a.value8=\"\",a.value9=\"\"},addfun:function(){var t=this;this.events={init:function(a){a.on(\"click\",function(a){t.wei(a.lnglat.getLng(),a.lnglat.getLat(),t)})}}},addmarker:function(){var t=this,a=r.getMap(),e=[],i=new AMap.Marker({position:[t.value6,t.value7],text:\"123\"});e.push(i),this.overlayGroups=new AMap.OverlayGroup(e),a.add(t.overlayGroups)},wei:function(t,a,e){this.data[this.data.length-1]=[t,a],e.value6=t,e.value7=a,this.addmarker()},handleClick:function(t,a){console.log(t,a)}}},u=d,c=(e(\"ebc1\"),e(\"2877\")),v=Object(c[\"a\"])(u,i,n,!1,null,\"0e3b3f15\",null);a[\"default\"]=v.exports},a710:function(t,a,e){},dbbd:function(t,a){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAtCAMAAAAX+PImAAAAkFBMVEUAAAAzdfYzdfYydvYydfYzdfYzdfYydfYydfYydfYzdvYydfYydfYydfYydfYydfYydfYydfUydvYzdfYydfYydfYydfYydfYydfYydfYydfYydfYydfUzdvYydfY0dfYzdfYydfYydfYydfUzdfY0dfYzdfYzdfYzdfY0dfYzdvYzdvYydfYydfU0dfYzdfaK7HXJAAAAL3RSTlMANv369MOFEAPm39EcvrWlmYpqSTsTDAfu49vOr04/MSsj18ifkX15cmFfJxhiQxlK8i8AAAE+SURBVDjLfdTXcoNADAXQC5hmigvuhWLHdlwS/f/fJZRBYmeX84bmetlBkiFYXhLaZIeJZ0EjeF6IHZYBFFZEQ4ccA0uHVPYDgkc6cw58k56Hzq9NBmc0NnsyCX3U7mS2aI7YjSQmGwA/snDLiuw2EZUngJQfjzFq8ZFLJyDgX4QftD5hX9sBFeeX/Im5GCPnh3WfWHPRwpmvCcavzkXCAeNGrmDJAzuyWMpXzvrEjGdgCxw48kLrxaUIwFy2wQfgL5QBWJHguCfXkYUC/yIyS1DLRhIrNE7GwBda/tQQuGzQqfRDtK/QK3WnTN8Q/JRU7lpZW0+95Baqh2nfmPzYaQCNwOVL+tAq++3MoMVtTmHy5m6YJO1iQY//SO4wK3iiDbZOO7wjpnVLMSZqxnuMWzcVY2a8WAbxla4xBv4AC3+K3wqmyF0AAAAASUVORK5CYII=\"},e2da:function(t,a){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAe1BMVEUAAAD/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/qm7/////wJP/rXL/38j/9e3/0bD/zar/yqb/8eb/5tX/5NH/1rj/tYH/697/4cz/xp7/wpb/uIf/9/H/2b7O2eAPAAAAFHRSTlMA2M767aWbaSEVCQJZxkTIRcrEWuXig/oAAAEeSURBVDjLjZTrcoIwEIVDABO5KLa73EXRavv+T1hG5EgCtfl+MMPyzexJSFbM0SqUge8HMlRarBInKc1Ik3jp7Dyy8HaWEm1ohU00d7YHWuWwnTloZePBivb0J/upI/Ks5nqui97yWGPsvZe8eJASAkVen+v88SgIJIP0gbemYlA1KKdCaLyUbFDigxaKQN8cJ+PY9ASUCAm0gwOrJRAKidQnNjghuxSBHWkZKhA+jeS8IKcRH1LHl2vZVc8N6MrrhbtJQrvbGOE+JPu+jyFvaCfJpKiYe7MksQXgB2FeW6BsqWb+MitKaFtqF5LGDwYNc2sUUhyVF2dbSpwOncPxzVwugtOVcrucsOS6I7fuAwNky9GT/T/EPmMBXMbhL7n6UNJPxERCAAAAAElFTkSuQmCC\"},ebc1:function(t,a,e){\"use strict\";var i=e(\"a710\"),n=e.n(i);n.a},fde2:function(t,a){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAeFBMVEUAAACGoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP+GoP/////5+v/D0P/a4v+Mpf/G1P+juP/k6v/g5/+zxP+ZsP+Tq/+Iov+nu//y9f/p7//P2v/M2f+rf+GrAAAAFXRSTlMAxvrtaUQhFQkCWdjXz8yknJmmpVqYhOGgAAABF0lEQVQ4y42U2XKDMAxFBRjCTpJWGLOTpf3/P2ydLnMVCHCez4yuLEuEBKrIPdf18kIFtEgUOww4cTR3/JSfSH2ShCde4BSic8h5kfwATsIvSP6t0OGXOH8Vj7zC8bcvXuXRY5SuS6l9r5iRuur7qmYkJiKZ2pTfGJmdKGBkKh9MjASkGLn+SFdGFBVLUstIQZnMra2jZfKMPBZUVqpY4JHLkkbriiXuTKrHsZ5Jslw73svyPraynAh++Sxvbde1t/LjIoK/gWNsZ8NgOzRgFaSwMwDSKxyLRknDWHDADUoNDFh8lWloTN91vWkGGHG889Ntf9/di7C9UtvLuXPNtw+GxE9mpfztI/Ye0SKBOmf2HGZneQ6/AELjVID3r3JxAAAAAElFTkSuQmCC\"}}]);","extractedComments":[]}
{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4fe7b0a6\",\"chunk-eb11aa14\",\"chunk-2d20ef58\"],{\"0fcc\":function(t,a,e){\"use strict\";var n=e(\"5d53\"),i=e.n(n);i.a},\"1f07\":function(t,a,e){\"use strict\";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"income-chart-wrapper\"},[e(\"el-tabs\",{staticStyle:{height:\"100%\"},attrs:{type:\"card\"},on:{\"tab-click\":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:\"activeName\"}},t._l(t.tabList,function(a){return e(\"el-tab-pane\",{key:a.name,ref:\"incomeItem\",refInFor:!0,staticClass:\"income-pane\",attrs:{label:a.name,name:a.name}},[e(\"div\",{staticClass:\"income-contrast\"},[e(\"div\",{staticClass:\"income-template\"},[e(\"div\",{staticClass:\"income-item-title\"},[t._v(t._s(a.itemName[0])+\"\\n            \"),e(\"ul\",[e(\"li\",[t._v(\"本月\"+t._s(a.chartName)+\"额\"),e(\"span\",{staticClass:\"yuan\"},[t._v(t._s(a.data.table1.monthSum))])]),t._v(\" \"),e(\"li\",[t._v(\"同比\"),e(\"span\",{staticClass:\"percentage\"},[t._v(t._s(a.data.table1.monthTB))])]),t._v(\" \"),e(\"li\",[t._v(\"环比\"),e(\"span\",{staticClass:\"percentage\"},[t._v(t._s(a.data.table1.monthHB))])])]),t._v(\" \"),e(\"ul\",[e(\"li\",{staticClass:\"li-bg\"},[t._v(\"本周\"+t._s(a.chartName)+\"额\"),e(\"span\",{staticClass:\"yuan\"},[t._v(t._s(a.data.table1.weekSum))])]),t._v(\" \"),e(\"li\",{staticClass:\"li-bg\"},[t._v(\"同比\"),e(\"span\",{staticClass:\"percentage\"},[t._v(t._s(a.data.table1.weekTB))])]),t._v(\" \"),e(\"li\",{staticClass:\"li-bg\"},[t._v(\"环比\"),e(\"span\",{staticClass:\"percentage\"},[t._v(t._s(a.data.table1.weekHB))])])])]),t._v(\" \"),\"酒店\"===a.name?e(\"div\",{staticClass:\"template-ringchart\"},[e(\"div\",{staticClass:\"tabs-jd-item\"},[e(\"div\",{class:{\"tabs-jd-active\":1===t.jdActive},on:{click:function(a){t.jdActive=1}}},[t._v(\"今年酒店营业额占比\")]),t._v(\"/\\n              \"),e(\"div\",{class:{\"tabs-jd-active\":2===t.jdActive},on:{click:function(a){t.jdActive=2}}},[t._v(\"上月每日酒店入住率\")])]),t._v(\" \"),\"酒店\"===t.activeName?e(\"div\",{staticStyle:{height:\"calc(100% - 20px)\"}},[1===t.jdActive?e(\"ring-chart\",{attrs:{id:a.name+\"chart1\",\"chart-type\":a.name,\"chart-data\":a.data.chart1,\"tip-title\":\"酒店营业额占比\",height:\"100%\",width:\"100%\"}}):t._e(),t._v(\" \"),2===t.jdActive?e(\"line-chart\",{attrs:{id:a.name+\"cahrt4\",\"chart-type\":\"scale\",\"chart-data\":t.tabList[5].data.chart4,\"tip-title\":\"酒店入住率\",height:\"100%\",width:\"100%\"}}):t._e()],1):t._e()]):e(\"div\",{staticClass:\"template-ringchart\"},[t._v(t._s(a.itemName[1])+\"\\n            \"),a.name===t.activeName?e(\"ring-chart\",{attrs:{id:a.name+\"chart1\",nesting:\"会员卡\"===a.name,\"chart-type\":a.name,\"chart-data\":a.data.chart1,\"tip-title\":a.itemName[1],height:\"calc(100% - 20px)\",width:\"100%\"}}):t._e()],1),t._v(\" \"),e(\"div\",{staticClass:\"template-stackchart\",staticStyle:{clear:\"both\"}},[t._v(t._s(a.itemName[2])+\"\\n            \"),a.name===t.activeName?e(\"stack-chart\",{attrs:{id:a.name+\"cahrt2\",\"chart-data\":a.data.chart2,\"tip-title\":a.itemName[2],\"show-legend\":\"汇总\"==a.name,height:\"calc(100% - 20px)\",width:\"100%\"}}):t._e()],1),t._v(\" \"),e(\"div\",{staticClass:\"template-stackchart\"},[t._v(t._s(a.itemName[3])+\"\\n            \"),a.name===t.activeName?e(\"line-chart\",{attrs:{id:a.name+\"cahrt3\",\"chart-data\":a.data.chart3,\"tip-title\":a.itemName[3],height:\"calc(100% - 20px)\",width:\"100%\"}}):t._e()],1)])])])}),1)],1)},i=[],c=(e(\"456d\"),e(\"6c7b\"),e(\"7f7f\"),e(\"ac6a\"),e(\"66b4\")),r=e(\"c542\"),s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},l=[],m=(e(\"a481\"),e(\"313e\")),o=e.n(m),d=e(\"f42c\"),h={mixins:[d[\"a\"]],props:{className:{type:String,default:\"chart\"},id:{type:String,default:\"chart\"},width:{type:String,default:\"200px\"},height:{type:String,default:\"200px\"},chartData:{type:Object,default:function(){return{}}},tipTitle:{type:String,default:\"\"},showLegend:{type:Boolean,default:!0}},data:function(){var t=new Date;return{chart:null,colorlist:this.$store.state.settings.chartColors,yearData:[t.getFullYear()-2+\"年\",t.getFullYear()-1+\"年\",t.getFullYear()+\"年\"]}},watch:{chartData:{immediate:!0,handler:function(t){var a=this;t&&this.$nextTick(function(){a.initChart(t)})},deep:!0}},mounted:function(){this.chart=o.a.init(document.getElementById(this.id))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(t){var a=this,e=function(){for(var e=[],n=t.ldata.length,i=0,c=0;i<n;i++)c>=a.colorlist.length&&(c=0),e.push({name:t.ldata[i],type:\"bar\",stack:\"总量\",barMaxWidth:40,itemStyle:{normal:{color:a.colorlist[c]}},label:{show:!1,position:\"insideRight\"},data:t.sdata[i]}),c++;return e}();a.chart.setOption({title:{show:e.length<=0,textStyle:{color:\"#909399\",fontWeight:\"normal\",fontSize:14},text:\"暂无数据\",left:\"center\",top:\"center\"},tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"},formatter:function(t){for(var e=t[0].name+a.tipTitle.replace(\"历年\",\"\"),n=0;n<t.length;n++)e+='<div class=\"circle\" >'+t[n].marker+t[n].seriesName+\" : \"+t[n].value+\"元</div>\";return e}},legend:{show:a.showLegend,data:t.ldata},grid:{left:\"15%\",bottom:20},xAxis:{name:\"日期(年)\",type:\"category\",axisLine:{lineStyle:{color:\"#90979c\"}},data:a.yearData},yAxis:{type:\"value\",name:\"营业额(元)\",axisLine:{lineStyle:{color:\"#90979c\"}},axisLabel:{formatter:\"{value}元\"}},series:e})}}},u=h,f=e(\"2877\"),p=Object(f[\"a\"])(u,s,l,!1,null,null,null),v=p.exports,b=e(\"0926\"),k=e(\"b21c\"),w={name:\"Charts\",components:{RingChart:r[\"a\"],StackChart:v,LineChart:b[\"a\"]},props:{scenicName:{type:String,default:\"全部景区\"}},data:function(){var t=new Date;return{activeName:\"汇总\",tabList:[{id:1,name:\"汇总\",chartName:\"总收入\",itemName:[\"总收入数据统计\",\"今年业态收入占比\",\"历年业态收入统计\",\"今年每月收入统计\"],url:\"/income/findAllIncome\",tabClick:!0,data:k[\"default\"][\"tab1\"]},{id:2,name:\"门票\",chartName:\"门票销售\",itemName:[\"门票销售数据统计\",\"今年门票销售额占比\",\"历年门票销售额统计\",\"今年每月门票销售额统计\"],url:\"/income/findTicketIncome\",tabClick:!1,data:k[\"default\"][\"tab2\"]},{id:3,name:\"餐饮\",chartName:\"餐饮营业\",itemName:[\"餐饮营业数据统计\",\"今年餐饮营业额占比\",\"历年餐饮营业额统计\",\"今年每月餐饮营业额统计\"],url:\"/income/findFoodIncome\",tabClick:!1,data:k[\"default\"][\"tab3\"]},{id:4,name:\"零售\",chartName:\"零售营业\",itemName:[\"零售营业数据统计\",\"今年零售营业额占比\",\"历年零售营业额统计\",\"今年每月零售营业额统计\"],url:\"/income/findSaleIncome\",tabClick:!1,data:k[\"default\"][\"tab4\"]},{id:5,name:\"剧场\",chartName:\"剧场营业\",itemName:[\"剧场营业数据统计\",\"今年剧场营业额占比\",\"历年剧场营业额统计\",\"今年每月剧场营业额统计\"],url:\"/income/findTheatreIncome\",tabClick:!1,data:k[\"default\"][\"tab5\"]},{id:6,name:\"酒店\",chartName:\"酒店营业\",itemName:[\"酒店营业数据统计\",\"今年酒店营业额占比\",\"历年酒店营业额统计\",\"今年每月酒店营业额统计\"],url:\"/income/findHotelIncome\",tabClick:!1,data:k[\"default\"][\"tab6\"]},{id:7,name:\"停车场\",chartName:\"停车场营业\",itemName:[\"停车场营业数据统计\",\"今年停车场营业额占比\",\"历年停车场营业额统计\",\"今年每月停车场营业额统计\"],url:\"/income/findParkcarIncome\",tabClick:!1,data:k[\"default\"][\"tab7\"]}],jdActive:1,thisY:t.getFullYear(),lastY:t.getFullYear()-1,beforeY:t.getFullYear()-2,monthCount:t.getMonth()+1}},mounted:function(){var t=this;this.$nextTick(function(){t.getTabList(\"/income/findAllIncome\",{areaName:t.scenicName}).then(function(a){t.formatAllData(a.data,0)})})},methods:{handleClick:function(t,a){var e=this,n=this,i=n.tabList[parseInt(t.index)];i.tabClick||this.getTabList(i.url,{areaName:this.scenicName}).then(function(a){e.formatAllData(a.data,parseInt(t.index))})},getTabList:function(t,a){return new Promise(function(e,n){Object(c[\"b\"])(t,a).then(function(t){e(t)}).catch(function(t){n(t)})})},formatAllData:function(t,a){if(t.length>0){var e=this,n=e.tabList[a].data,i=n.chart1,c=n.chart2.sdata,r=n.chart3.sdata,s=n.table1,l={};if(t.forEach(function(t){if(0===t.dateYear){if(t.imcomeType<=5||8===t.imcomeType){var m=t.imcomeType-1;switch(a>0?m=0:8===t.imcomeType&&(m=5),parseInt(t.dateName)){case e.beforeY:c[m][0]=t.imcomeValue;break;case e.lastY:c[m][1]=t.imcomeValue;break;case e.thisY:c[m][2]=t.imcomeValue,0===a&&(i.sdata[m].value=t.imcomeValue);break;default:break}}}else if(1===t.dateYear){if(t.imcomeType<=5||8===t.imcomeType)if(a>0)l.hasOwnProperty(t.name)||(l[t.name]=new Array(e.monthCount).fill(0)),l[t.name][parseInt(t.dateName)-1]=t.imcomeValue;else{var o=t.imcomeType-1;8===t.imcomeType&&(o=5),r[o][parseInt(t.dateName)-1]=t.imcomeValue}}else if(8===t.dateYear&&(s.monthSum=t.thismonthIncome||0,s.monthTB=t.thismonthSame,s.monthHB=t.thismonthDis,s.weekSum=t.thisweekIncome||0,s.weekTB=t.thisweekSame,s.weekHB=t.thisweekDis,a>0)){var d=[],h=[];for(var u in t.rateMap)d.push(u),h.push({name:u,value:t.rateMap[u]});if(i.ldata=d,i.sdata=h,5===a){var f={};t.upMonthHotelRateMap.forEach(function(t){if(!f.hasOwnProperty(t.hotelName)){var a=31,n=e.monthCount-1;2===n?a=e.thisY%4===0?29:28:4!==n&&6!==n&&9!==n&&11!==n||(a=30),f[t.hotelName]=new Array(a).fill(0)}var i=new Date(t.date);f[t.hotelName][i.getDate()-1]=parseFloat(t.roomPrice.toFixed(2))}),n.chart4.ldata=Object.keys(f);var p=[];for(var v in f)p.push(f[v]);n.chart4.sdata=p}}}),e.$set(e.tabList[a].data.chart2,\"sdata\",null),e.$set(e.tabList[a].data.chart2,\"sdata\",c),a>0){e.$set(e.tabList[a].data.chart3,\"ldata\",Object.keys(l));var m=[];for(var o in l)m.push(l[o]);r=m}e.$set(e.tabList[a].data.chart3,\"sdata\",null),e.$set(e.tabList[a].data.chart3,\"sdata\",r)}}}},g=w,y=(e(\"707a\"),Object(f[\"a\"])(g,n,i,!1,null,null,null));a[\"default\"]=y.exports},\"5d53\":function(t,a,e){},\"66b4\":function(t,a,e){\"use strict\";e.d(a,\"b\",function(){return i}),e.d(a,\"c\",function(){return c}),e.d(a,\"a\",function(){return r});var n=e(\"b775\");function i(t,a){return Object(n[\"a\"])({headers:{\"Content-Type\":\"application/json\"},transformRequest:[function(t){return t=JSON.stringify(t),t}],url:t,method:\"post\",data:a})}function c(t,a){return Object(n[\"a\"])({headers:{\"Content-Type\":\"application/json\"},transformRequest:[function(t){return t=JSON.stringify(t),t}],url:t,method:\"get\",data:a})}function r(t,a){return Object(n[\"a\"])({headers:{\"Content-Type\":\"application/vnd.ms-excel\"},transformRequest:[function(t){return t=JSON.stringify(t),t}],responseType:\"blob\",url:t,method:\"post\",data:a})}},\"707a\":function(t,a,e){\"use strict\";var n=e(\"9478\"),i=e.n(n);i.a},9478:function(t,a,e){},b21c:function(t,a,e){\"use strict\";e.r(a);var n={tab1:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[\"门票\",\"餐饮\",\"零售\",\"剧场\",\"酒店\",\"停车场\"],sdata:[{value:0,name:\"门票\"},{value:0,name:\"餐饮\"},{value:0,name:\"零售\"},{value:0,name:\"剧场\"},{value:0,name:\"酒店\"},{value:0,name:\"停车场\"}]},chart2:{ldata:[\"门票\",\"餐饮\",\"零售\",\"剧场\",\"酒店\",\"停车场\"],sdata:[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]},chart3:{ldata:[\"门票\",\"餐饮\",\"零售\",\"剧场\",\"酒店\",\"停车场\"],sdata:[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0]]}},tab2:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[],sdata:[]},chart2:{ldata:[\"门票\"],sdata:[[0,0,0]]},chart3:{ldata:[],sdata:[]}},tab3:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[],sdata:[]},chart2:{ldata:[\"餐饮\"],sdata:[[0,0,0]]},chart3:{ldata:[],sdata:[]}},tab4:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[],sdata:[]},chart2:{ldata:[\"零售\"],sdata:[[0,0,0]]},chart3:{ldata:[],sdata:[]}},tab5:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[],sdata:[]},chart2:{ldata:[\"剧场\"],sdata:[[0,0,0]]},chart3:{ldata:[],sdata:[]}},tab6:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[],sdata:[]},chart2:{ldata:[\"酒店\"],sdata:[[0,0,0]]},chart3:{ldata:[],sdata:[]},chart4:{ldata:[],sdata:[]}},tab7:{table1:{monthSum:0,monthTB:\"0\",monthHB:\"0\",weekSum:0,weekTB:\"0\",weekHB:\"0\"},chart1:{ldata:[],sdata:[]},chart2:{ldata:[\"停车场\"],sdata:[[0,0,0]]},chart3:{ldata:[],sdata:[]}}};a[\"default\"]=n},f967:function(t,a,e){\"use strict\";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",{staticClass:\"income-wrapper\"},[e(\"charts\",{attrs:{\"scenic-name\":\"全部景区\"}})],1)},i=[],c=e(\"1f07\"),r={name:\"Income\",components:{Charts:c[\"default\"]},data:function(){return{activeName:\"全部景区\",tabList:[{id:0,name:\"全部景区\"},{id:1,name:\"A景区\"},{id:2,name:\"B景区\"}]}},created:function(){},methods:{handleClick:function(t,a){}}},s=r,l=(e(\"0fcc\"),e(\"2877\")),m=Object(l[\"a\"])(s,n,i,!1,null,\"e927f5c4\",null);a[\"default\"]=m.exports}}]);","extractedComments":[]}
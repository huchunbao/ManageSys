{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\informationpush\\channelset.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\informationpush\\channelset.vue","mtime":1578017516876},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _axios = require(\"@/api/axios\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'Tourist',\n  data: function data() {\n    return {\n      cpid: null,\n      default_bar: 0,\n      name: '',\n      messages_tart: '',\n      messages_content: '',\n      messages_end: '',\n      isused: false,\n      cities: ['短信', '手机游景区', '手机管景区'],\n      disabled: true,\n      edit: false,\n      list_value: [{\n        name: '短信',\n        value: false\n      }, {\n        name: '手机游景区',\n        value: false\n      }, {\n        name: '手机管景区',\n        value: false\n      }],\n      options: [{\n        value: '选项1',\n        label: '黄金糕'\n      }, {\n        value: '选项2',\n        label: '双皮奶'\n      }, {\n        value: '选项3',\n        label: '蚵仔煎'\n      }, {\n        value: '选项4',\n        label: '龙须面'\n      }, {\n        value: '选项5',\n        label: '北京烤鸭'\n      }]\n    };\n  },\n  computed: {\n    datas: function datas() {\n      if (this.list_value.length > 0) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    save: function save() {\n      return this.name && this.messages_tart && this.messages_content && this.messages_end;\n    }\n  },\n  watch: {},\n  created: function created() {\n    this.cpid = this.$store.state.user.companyId;\n  },\n  mounted: function mounted() {\n    // 渠道列表获取\n    this.initChannel(); // 渠道列表点击\n\n    this.Clickli(0); // 模板列表获取\n\n    this.moduleName();\n  },\n  methods: {\n    addClick: function addClick() {\n      var _this = this;\n\n      var that = this;\n      this.$prompt('请输入渠道名称', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        inputPattern: /\\S{3,}/,\n        inputErrorMessage: '请检查渠道名称是否正确(不少于三个任意字符)'\n      }).then(function (_ref) {\n        var value = _ref.value;\n\n        // this.$message({\n        //   type: 'success',\n        //   message: '你的邮箱是: ' + value\n        // })\n        if (value) {\n          that.list_value.push({\n            name: value,\n            value: false\n          });\n          that.Clickli(that.list_value.length - 1);\n        }\n      }).catch(function () {\n        _this.$message({\n          type: 'info',\n          message: '取消输入'\n        });\n      });\n    },\n    delClick: function delClick() {\n      var _this2 = this;\n\n      var that = this;\n      var val = that.list_value[that.default_bar].name;\n      this.$confirm('<span>是否删除:&nbsp;&nbsp;<span style=\"color: red;\">' + val + '</span></span>', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'error',\n        dangerouslyUseHTMLString: true,\n        center: true\n      }).then(function () {\n        if (that.default_bar || that.default_bar === 0) {\n          that.list_value.splice(that.default_bar, 1);\n          that.default_bar = null;\n        }\n      }).catch(function () {\n        _this2.$message({\n          type: 'message',\n          message: '已取消删除'\n        });\n      });\n    },\n    onchange: function onchange(val) {\n      var that = this;\n      var list = this.options;\n      console.log(list);\n\n      for (var i = 0; i < list.length; i++) {\n        if (list[i].value === val) {\n          that.messages_content = list[i].content;\n        }\n      }\n    },\n    changeClick: function changeClick() {\n      this.disabled = false; // this.edit = true\n\n      console.log('当前修改的是' + this.default_bar);\n    },\n    // 渠道列表获取\n    initChannel: function initChannel() {\n      var that = this;\n      (0, _axios.get)('/notify-template/' + that.cpid, null).then(function (response) {\n        // 获取渠道通知模板\n        if (response.status === 0) {\n          var list = response.data;\n          var list_value = [];\n\n          for (var i = 0; i < list.length; i++) {\n            list_value.push({\n              name: list[i].wayName,\n              value: false\n            });\n          }\n\n          that.list_value = list_value;\n        }\n      });\n    },\n    // 模板名称获取\n    moduleName: function moduleName() {\n      var that = this;\n      (0, _axios.get)('/notify-template/' + that.cpid).then(function (data) {\n        console.log(data);\n\n        if (data.msg === 'SUCCESS') {\n          var options = [];\n          var list = data.data;\n\n          for (var i = 0; i < list.length; i++) {\n            options.push({\n              'value': list[i].id,\n              'label': list[i].wayName,\n              'content': list[i].content\n            });\n          }\n\n          that.options = options;\n        }\n      });\n    },\n    saveClick: function saveClick() {\n      this.edit = false;\n      this.disabled = true; // 保存获取到渠道的选项\n\n      console.log(this.options); // that.options = options\n      // 渠道的配置项\n      // that.list_value\n      // this.name\n      // this.messages_tart\n      // this.messages_content\n      // this.messages_end\n      // this.isused\n\n      console.log(this.list_value);\n    },\n    Clickli: function Clickli(index) {\n      // window.event.stopPropagation()\n      this.default_bar = index;\n      var that = this;\n\n      for (var i = 0; i < that.list_value.length; i++) {\n        if (i === index) {\n          that.list_value[i].value = !that.list_value[i].value;\n        }\n      } // 重置渠道配置\n\n\n      this.name = null;\n      this.messages_tart = null;\n      this.messages_content = null;\n      this.messages_end = null;\n      this.isused = false;\n      this.disabled = true;\n    },\n    switchClick: function switchClick(index) {\n      var that = this;\n      that.default_bar = index;\n      window.event.stopPropagation(); // for (var i = 0; i < that.list_value.length; i++) {\n      //   if (i !== index) {\n      //     that.list_value[i].value = false\n      //   }\n      // }\n    }\n  }\n};\nexports.default = _default;",null]}
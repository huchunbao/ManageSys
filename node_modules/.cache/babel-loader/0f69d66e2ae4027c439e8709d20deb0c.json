{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\alarm\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\alarm\\index.vue","mtime":1578016623671},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\\\u529E\\u516C\\\\projectwc\\\\\\u524D\\u7AEF\\\\ManageSys\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _echarts = _interopRequireDefault(require(\"echarts\"));\n\nvar _axios = require(\"../../api/axios.js\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'About',\n  data: function data() {\n    return {\n      sure: 0,\n      clear: 0,\n      nosure: 0,\n      noclear: 0,\n      gjing: '',\n      arrdata: [],\n      multipleTable: [],\n      arr: [],\n      pagesize: 3,\n      pageNumber: 2,\n      all: 0,\n      //      总页数\n      cur: 1,\n      data: {},\n      seldata: '1',\n      open1: {\n        color: ['#8aa3ff'],\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: '<br>{b}:告警数量为{c}次'\n        },\n        xAxis: {\n          type: 'category',\n          data: ['0', '2', '4', '6', '8', '10', '12', '14', '16', '18', '20', '22', '24']\n        },\n        yAxis: {\n          type: 'value',\n          splitLine: {\n            show: false\n          },\n          axisLabel: {\n            formatter: '{value} 次'\n          }\n        },\n        series: [{\n          data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n          type: 'line',\n          smooth: true\n        }]\n      },\n      open2: {\n        color: ['#8aa3ff', '#96bbf2', '#c2d8ff', '#e4e6ff', '#ff999a', '#ffdd65', '#d4c0ff'],\n        legend: {\n          data: ['告警数', '已确认', '已清除']\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{b}<br>{a}{c}次'\n        },\n        xAxis: {\n          type: 'category',\n          data: ['今日', '昨日']\n        },\n        yAxis: {\n          type: 'value',\n          axisLabel: {\n            formatter: '{value} 次'\n          },\n          splitLine: {\n            show: false\n          }\n        },\n        series: [{\n          type: 'bar',\n          name: '告警数',\n          data: []\n        }, {\n          type: 'bar',\n          name: '已确认',\n          data: []\n        }, {\n          type: 'bar',\n          name: '已清除',\n          data: []\n        }]\n      },\n      zhdata: {},\n      zh: false,\n      multipleSelection: []\n    };\n  },\n  computed: {},\n  watch: {\n    seldata: function seldata() {\n      this.open1.series[0].data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      this.jinzuoif();\n    }\n  },\n  mounted: function mounted() {\n    this.snowTurnoveraa();\n    this.shua();\n    this.jinzuoif();\n  },\n  methods: {\n    jinzuoif: function jinzuoif() {\n      if (this.seldata === '1') {\n        this.jin();\n      } else {\n        this.zuo();\n      }\n    },\n    shua: function shua() {\n      var that = this;\n      (0, _axios.get)('/alarmInfo/selectByIdAndClear', {\n        cpid: this.$store.state.user.companyId,\n        pageNum: that.cur - 1,\n        pageSize: 5\n      }).then(function (res) {\n        that.arrdata = res.content;\n        that.all = res.totalElements;\n      });\n      (0, _axios.get)('/alarmInfo/selectCountToday', {\n        cpid: this.$store.state.user.companyId\n      }).then(function (res) {\n        if (res['所有告警'] !== null) {\n          that.gjing = res['所有告警'];\n        } else {\n          that.gjing = 0;\n        }\n\n        if (res['已确认'] !== null) {\n          that.sure = res['已确认'];\n        } else {\n          that.sure = 0;\n        }\n\n        if (res['已清除'] !== null) {\n          that.clear = res['已清除'];\n        } else {\n          that.clear = 0;\n        }\n\n        if (res['未确认'] !== null) {\n          that.nosure = res['未确认'];\n        } else {\n          that.nosure = 0;\n        }\n\n        if (res['未清除'] !== null) {\n          that.noclear = res['未清除'];\n        } else {\n          that.noclear = 0;\n        }\n      });\n    },\n    jin: function jin() {\n      var _this = this;\n\n      (0, _axios.get)('/alarmInfo/countTimeAndNumToday', {\n        cpid: this.$store.state.user.companyId\n      }).then(function (res) {\n        for (var i = 0; i < _this.open1.xAxis.data.length; i++) {\n          for (var i2 = 0; i2 < res.length; i2++) {\n            if (_this.open1.xAxis.data[i] === res[i2].c_hour) {\n              _this.open1.series[0].data[i] = res[i2].num;\n            }\n          }\n        }\n\n        _this.snowTurnover();\n      });\n    },\n    zuo: function zuo() {\n      var _this2 = this;\n\n      (0, _axios.get)('/alarmInfo/countTimeAndNumYesterday', {\n        cpid: this.$store.state.user.companyId\n      }).then(function (res) {\n        for (var i = 0; i < _this2.open1.xAxis.data.length; i++) {\n          for (var i2 = 0; i2 < res.length; i2++) {\n            if (_this2.open1.xAxis.data[i] === res[i2].c_hour) {\n              _this2.open1.series[0].data[i] = res[i2].num;\n            }\n          }\n        }\n\n        _this2.snowTurnover();\n      });\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    btnClick: function btnClick(data) {\n      this.cur = data;\n      this.shua();\n    },\n    clickok: function clickok() {\n      this.zh = false;\n      this.zhdata = [];\n    },\n    zhfa: function zhfa(i) {\n      console.log(i);\n      this.zh = true;\n      this.zhdata = this.arr[i];\n    },\n    snowTurnover: function snowTurnover() {\n      var snowTurnover = _echarts.default.init(document.getElementById('snowTurnover'));\n\n      snowTurnover.resize();\n      snowTurnover.setOption(this.open1);\n    },\n    snowTurnoveraa: function snowTurnoveraa() {\n      var _this3 = this;\n\n      var snowTurnoveraa = _echarts.default.init(document.getElementById('snowTurnoveraa'));\n\n      (0, _axios.get)('/alarmInfo/selectCountYesterday', {\n        cpid: this.$store.state.user.companyId\n      }).then(function (response) {\n        _this3.open2.series[0].data[1] = response['所有告警'];\n        _this3.open2.series[1].data[1] = response['已确认'];\n        _this3.open2.series[2].data[1] = response['已清除'];\n        console.log(111);\n        (0, _axios.get)('/alarmInfo/selectCountToday', {\n          cpid: _this3.$store.state.user.companyId\n        }).then(function (response) {\n          _this3.open2.series[0].data[0] = response['所有告警'];\n          _this3.open2.series[1].data[0] = response['已确认'];\n          _this3.open2.series[2].data[0] = response['已清除'];\n          console.log(110);\n          snowTurnoveraa.resize();\n          snowTurnoveraa.setOption(_this3.open2);\n        });\n      });\n    },\n    yqr: function yqr(index) {\n      var that = this;\n      var data = [];\n\n      for (var i = 0; i < that.multipleSelection.length; i++) {\n        data.push({\n          aid: that.multipleSelection[i].id,\n          confirmState: index + '',\n          alarmAffirmTime: ''\n        });\n      }\n\n      (0, _axios.post)('/alarmInfo/batchUpdateState', data).then(function (res) {\n        that.shua();\n      });\n    },\n    qc: function qc() {\n      var that = this;\n      var data = [];\n\n      for (var i = 0; i < that.multipleSelection.length; i++) {\n        data.push({\n          aid: that.multipleSelection[i].id,\n          clear_state: i + '',\n          clearTime: ''\n        });\n      }\n\n      (0, _axios.post)('/alarmInfo/batchUpdateStateClear', data).then(function (res) {\n        that.shua();\n      });\n    }\n  }\n};\nexports.default = _default;",null]}
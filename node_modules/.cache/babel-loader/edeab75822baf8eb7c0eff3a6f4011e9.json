{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\thread-loader\\dist\\cjs.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\components\\Charts\\LineChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\components\\Charts\\LineChart.vue","mtime":1576638136378},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\nimport echarts from 'echarts';\nimport resize from \"./mixins/resize\";\nexport default {\n  mixins: [resize],\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    id: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '200px'\n    },\n    height: {\n      type: String,\n      default: '200px'\n    },\n    stack: {\n      type: Boolean,\n      default: true\n    },\n    chartType: {\n      type: String,\n      default: ''\n    },\n    chartData: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    tipTitle: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      chart: null,\n      colorlist: this.$store.state.settings.chartColors\n    };\n  },\n  watch: {\n    chartData: {\n      immediate: true,\n      handler: function handler(val) {\n        var _this = this;\n\n        if (!val) return;\n        this.$nextTick(function () {\n          _this.initChart(val);\n        });\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    this.chart = echarts.init(document.getElementById(this.id));\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (!this.chart) {\n      return;\n    }\n\n    this.chart.dispose();\n    this.chart = null;\n  },\n  methods: {\n    initChart: function initChart(chartData) {\n      if (this.chart) {\n        this.chart.clear();\n      }\n\n      var that = this;\n      var unit = '元';\n      var yName = '营业额(元)';\n      var xName = '日期(月)';\n      var xItem = [];\n      var now = new Date();\n      var month = now.getMonth() + 1;\n\n      if (that.chartType === 'scale') {\n        unit = '%';\n        yName = '百分比(%)';\n        xName = '日期(日)';\n        var days = 31;\n\n        if (month === 2) {\n          days = now.getFullYear() % 4 === 0 ? 29 : 28;\n        } else if (month === 4 || month === 6 || month === 9 || month === 11) {\n          days = 30;\n        }\n\n        for (var j = 1; j <= days; j++) {\n          xItem.push(j + '日');\n        }\n      } else {\n        for (var i = 1; i <= month; i++) {\n          xItem.push(i + '月');\n        }\n\n        if (that.chartType === 'jftj') {\n          unit = '分';\n          yName = '积分(分)';\n        } else if (that.chartType === 'parking') {\n          unit = '辆';\n          yName = '数量(辆)';\n        }\n      }\n\n      var xData = function () {\n        var data = [];\n        var datalen = chartData.ldata.length;\n\n        for (var _i = 0, _j = 0; _i < datalen; _i++) {\n          if (_j >= that.colorlist.length) {\n            _j = 0;\n          } // console.log(chartData.ldata[i])\n\n\n          if (!that.stack) {\n            data.push({\n              name: chartData.ldata[_i],\n              type: 'line',\n              stack: '总量',\n              itemStyle: {\n                normal: {\n                  color: that.colorlist[_j]\n                }\n              },\n              data: chartData.sdata[_i]\n            });\n          } else {\n            data.push({\n              name: chartData.ldata[_i],\n              type: 'line',\n              itemStyle: {\n                normal: {\n                  color: that.colorlist[_j]\n                }\n              },\n              data: chartData.sdata[_i]\n            });\n          }\n\n          _j++;\n        }\n\n        return data;\n      }();\n\n      that.chart.setOption({\n        title: {\n          show: xData.length <= 0,\n          textStyle: {\n            color: '#909399',\n            fontWeight: 'normal',\n            fontSize: 14\n          },\n          text: '暂无数据',\n          left: 'center',\n          top: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          formatter: function formatter(params) {\n            var relVal = params[0].name + that.tipTitle.replace('今年每月', '');\n\n            for (var i = 0; i < params.length; i++) {\n              relVal += '<div class=\"circle\" >' + params[i].marker + params[i].seriesName + ' : ' + params[i].value + unit + '</div>';\n            }\n\n            return relVal;\n          }\n        },\n        grid: {\n          left: '15%',\n          right: '10%',\n          bottom: 20\n        },\n        legend: {\n          top: 10,\n          data: chartData.ldata\n        },\n        xAxis: {\n          name: xName,\n          type: 'category',\n          axisLine: {\n            lineStyle: {\n              color: '#90979c'\n            }\n          },\n          boundaryGap: false,\n          data: xItem\n        },\n        yAxis: {\n          type: 'value',\n          name: yName,\n          axisLine: {\n            lineStyle: {\n              color: '#90979c'\n            }\n          },\n          axisLabel: {\n            formatter: '{value}' + unit\n          }\n        },\n        series: xData\n      });\n    }\n  }\n};",null]}
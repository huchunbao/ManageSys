{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\passenger\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\passenger\\index.vue","mtime":1577670779953},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\\\u529E\\u516C\\\\projectwc\\\\\\u524D\\u7AEF\\\\ManageSys\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nvar _echarts = _interopRequireDefault(require(\"echarts\"));\n\nvar _axios = require(\"@/api/axios\");\n\nvar _vueAmap = require(\"vue-amap\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar amapManager = new _vueAmap.AMapManager();\nvar amapManager2 = new _vueAmap.AMapManager();\nvar _default = {\n  name: 'PassenGer',\n  data: function data() {\n    var colorlist = this.$store.state.settings.chartColors;\n    return {\n      zoom: 16,\n      center: [116.336496, 39.942178],\n      mapStyle: 'amap://styles/whitesmoke',\n      zoom1: 14,\n      img: require(\"../../assets/images/didian.png\"),\n      markers: [],\n      center1: [116.336496, 39.942178],\n      mapStyle1: 'amap://styles/fresh',\n      events: {},\n      amapManager: amapManager,\n      amapManager2: amapManager2,\n      // 进入景区的人\n      enter: 0,\n      // 出景区的人\n      out: 0,\n      // 客流情况趋势图切换1代表客流情况2代表趋势图\n      activeName: 'qing',\n      supportData: [],\n      echarts1: null,\n      echarts2: null,\n      echarts3: null,\n      option1: {\n        title: {\n          text: '实时景点客流占比',\n          x: 'left',\n          textStyle: {\n            fontSize: '14px',\n            color: 'rgba(29,33,51,1)'\n          }\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '{a}</br>{b}:{c}人({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          y: 'center',\n          right: '10%',\n          show: false,\n          data: []\n        },\n        series: [{\n          name: '客流量',\n          type: 'pie',\n          radius: ['30%', '50%'],\n          center: ['38%', '50%'],\n          data: [],\n          label: {\n            position: 'outside',\n            formatter: '{d}%'\n          },\n          itemStyle: {\n            emphasis: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\n            },\n            normal: {\n              color: function color(params) {\n                return colorlist[params.dataIndex % colorlist.length];\n              }\n            }\n          }\n        }]\n      },\n      option2: {\n        grid: {\n          left: '15%',\n          right: '20%',\n          top: '18%',\n          bottom: '20%'\n        },\n        tooltip: {\n          type: 'axios',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: '国庆节客流量统计<br>{b}:{c}人'\n        },\n        xAxis: {\n          type: 'category',\n          data: ['10.1', '10.2', '10.3', '10.4', '10.5', '10.6', '10.7'],\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          name: '日期（月/日）'\n        },\n        yAxis: {\n          type: 'value',\n          name: '金额（元）' // axisLabel: { formatter: '{value} 人' }\n\n        },\n        series: [{\n          data: new Array(7).fill(0),\n          type: 'bar',\n          color: '#A2BCFF',\n          barWidth: '15'\n        }]\n      },\n      option3: {\n        grid: {\n          left: '15%',\n          right: '18%',\n          top: '18%',\n          bottom: '20%'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          },\n          // axisPointer: {\n          //   type: 'cross'\n          // },\n          // backgroundColor: 'rgba(245, 245, 245, 0.8)',\n          // borderWidth: 1,\n          // borderColor: '#ccc',\n          // padding: 10,\n          // textStyle: {\n          //   color: '#000'\n          // },\n          // position: function(pos, params, el, elRect, size) {\n          //   var obj = { top: 10 }\n          //   obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30\n          //   return obj\n          // },\n          formatter: '去年客流趋势<br>{b}月:{c}人'\n        },\n        xAxis: {\n          type: 'category',\n          data: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          name: '日期（月）'\n        },\n        yAxis: {\n          type: 'value',\n          name: '人数（人）' // axisLabel: { formatter: '{value} 人' }\n\n        },\n        series: [{\n          data: new Array(12).fill(0),\n          type: 'line',\n          color: '#3F6AFF'\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.init();\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.removeEventListener('resize', this.resizeHandler);\n  },\n  methods: {\n    init: function init() {\n      var _this2 = this;\n\n      (0, _axios.get)('/customerFlow/findCustomerFlowIndex', {}).then(function (data) {\n        // 获取数据\n        if (data.status === 0) {\n          data.data.forEach(function (item) {\n            switch (item.dateYear) {\n              case 0:\n                _this2.enter = item.enteringNumber;\n                _this2.out = item.leaveNumber;\n                break;\n\n              case 1:\n                // 地图点位\n                _this2.markers.push({\n                  position: [item.lng, item.lat],\n                  wen: {\n                    content: '<span style=\"color:#A0B5FF; font-size:3vh;\">' + item.baseHold + '</span>人<br>' + item.address\n                  }\n                });\n\n                _this2.supportData.push({\n                  lng: item.lng,\n                  lat: item.lat,\n                  count: item.baseHold\n                });\n\n                _this2.option1.series[0].data.push({\n                  value: item.baseHold,\n                  name: item.address\n                });\n\n                _this2.option1.legend.data.push(item.address);\n\n                break;\n\n              case 2:\n                // 去年\n                _this2.option3.series[0].data[parseInt(item.dateName) - 1] = item.baseHold;\n                break;\n\n              case 12:\n                // 国庆节\n                _this2.option2.series[0].data[parseInt(item.dateName) - 1] = item.baseHold;\n                break;\n\n              default:\n                break;\n            }\n          });\n\n          _this2.drawLine();\n\n          _this2.supportcanvas();\n\n          _this2.echaers2fund();\n\n          _this2.echaers3fund();\n\n          window.addEventListener('resize', _this2.resizeHandler);\n        }\n      });\n    },\n    resizeHandler: function resizeHandler() {\n      if (this.echarts1) {\n        this.echarts1.resize();\n      }\n\n      if (this.echarts2) {\n        this.echarts2.resize();\n      }\n\n      if (this.echarts3) {\n        this.echarts3.resize();\n      }\n    },\n    markerstyle: function markerstyle() {\n      var divstyle = '';\n      divstyle += '<img :src=\"' + this.img + '\">';\n      divstyle;\n    },\n    handleClick: function handleClick(tab, event) {// console.log(tab, event)\n    },\n    drawLine: function drawLine() {\n      var _this3 = this;\n\n      this.echarts1 = _echarts.default.init(document.getElementById('echarts1'));\n      this.echarts1.setOption(this.option1);\n      window.addEventListener('resize', function () {\n        _this3.echarts1.resize();\n      });\n    },\n    // 热力图\n    supportcanvas: function supportcanvas() {\n      var that = this;\n      var map = amapManager2.getMap();\n\n      if (map) {\n        var heatmap;\n        map.plugin(['AMap.Heatmap'], function () {\n          heatmap = new AMap.Heatmap(map, {\n            radius: 25,\n            opacity: [0, 0.8],\n            gradient: {\n              0.5: 'blue',\n              0.65: 'rgb(117,211,248)',\n              0.7: 'rgb(0, 255, 0)',\n              0.9: '#ffea00',\n              1.0: 'red'\n            }\n          });\n          heatmap.setDataSet({\n            data: that.supportData,\n            max: 1600\n          });\n        });\n      } else {\n        this.events = {\n          init: function init(o) {\n            console.log(o);\n            var heatmap;\n            o.plugin(['AMap.Heatmap'], function () {\n              heatmap = new AMap.Heatmap(o, {\n                radius: 25,\n                opacity: [0, 0.8],\n                gradient: {\n                  0.5: 'blue',\n                  0.65: 'rgb(117,211,248)',\n                  0.7: 'rgb(0, 255, 0)',\n                  0.9: '#ffea00',\n                  1.0: 'red'\n                }\n              });\n              heatmap.setDataSet({\n                data: that.supportData,\n                max: 1600\n              });\n            });\n          }\n        };\n      }\n    },\n    echaers2fund: function echaers2fund() {\n      var _this4 = this;\n\n      this.echarts2 = _echarts.default.init(document.getElementById('echarts2'));\n      this.echarts2.setOption(this.option2);\n      window.addEventListener('resize', function () {\n        _this4.echarts2.resize();\n      });\n    },\n    echaers3fund: function echaers3fund() {\n      var _this5 = this;\n\n      this.echarts3 = _echarts.default.init(document.getElementById('echarts3'));\n      this.echarts3.setOption(this.option3);\n      window.addEventListener('resize', function () {\n        _this5.echarts3.resize();\n      });\n    }\n  }\n};\nexports.default = _default;",null]}
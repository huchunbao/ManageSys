{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\onecard\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\onecard\\index.vue","mtime":1576820780362},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\\\u529E\\u516C\\\\projectwc\\\\\\u524D\\u7AEF\\\\ManageSys\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _echarts = _interopRequireDefault(require(\"echarts\"));\n\nvar _axios = require(\"@/api/axios\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nvar _default = {\n  /* eslint-disable */\n  name: 'onecard',\n  data: function data() {\n    return {\n      //tab按钮\n      // tab: [\"标题一\",\"标题二\",\"标题三\"],\n      // default_bar: 0,\n      thismonthreCharge: '',\n      // 本月充值金额\n      thismonthChargeSame: '',\n      // 本月充值同比\n      thismonthChargeDis: '',\n      // 本月充值环比\n      thismonthIncome: '',\n      // 本月消费金额\n      thismonthSame: '',\n      // 本月消费同比\n      thismonthDis: '',\n      //, 本月消费环比\n      thisweekChargeIncome: '',\n      // 本周充值金额\n      thisweekChargeSame: '',\n      // 本周充值金额同比\n      thisweekChargeDis: '',\n      // 本周充值金额环比\n      thisweekIncome: '',\n      // 本周消费\n      thisweekSame: '',\n      // 同\n      thisweekDis: '',\n      // 环\n      totalNum: '',\n      // 总数\n      usedTotalNum: '',\n      // 已使用\n      restTotalNum: '',\n      // 未使用\n      ehcart1: null,\n      ehcart2: null,\n      ehcart3: null\n    };\n  },\n  mounted: function mounted() {\n    // this.TabClick(0)\n    var that = this;\n    this.$nextTick(function () {\n      (0, _axios.get)('income/findIPassIncome').then(function (data) {\n        if (data.msg === \"SUCCESS\") {\n          var sourceMap = data.data.sourceMap;\n          var data = data.data.list;\n          var ring_series = []; // 一卡通腕带环状图\n\n          var left_lend = [],\n              left_series = []; //消费额占比\n\n          var right_legend = [],\n              right_series = [],\n              data_9 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n              data_10 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n              data_11 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n              data_12 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; // 消费趋势list_data--为循环添加的data数组\n\n          for (var i = 0; i < data.length; i++) {\n            if (data[i].dateYear == 8) {\n              that.thismonthreCharge = data[i].thismonthreCharge ? data[i].thismonthreCharge : 0;\n              that.thismonthChargeSame = data[i].thismonthChargeSame ? data[i].thismonthChargeSame : 0;\n              that.thismonthChargeDis = data[i].thismonthChargeDis ? data[i].thismonthChargeDis : 0;\n              that.thismonthIncome = data[i].thismonthIncome ? data[i].thismonthIncome : 0;\n              that.thismonthSame = data[i].thismonthSame ? data[i].thismonthSame : 0;\n              that.thismonthDis = data[i].thismonthDis ? data[i].thismonthDis : 0;\n              that.thisweekChargeIncome = data[i].thisweekChargeIncome ? data[i].thisweekChargeIncome : 0;\n              that.thisweekChargeSame = data[i].thisweekChargeSame ? data[i].thisweekChargeSame : 0;\n              that.thisweekChargeDis = data[i].thisweekChargeDis ? data[i].thisweekChargeDis : 0;\n              that.thisweekIncome = data[i].thisweekIncome ? data[i].thisweekIncome : 0;\n              that.thisweekSame = data[i].thisweekSame ? data[i].thisweekSame : 0;\n              that.thisweekDis = data[i].thisweekDis ? data[i].thisweekDis : 0; // 总数 totalNum\n              // 已使用 usedTotalNum\n              // 剩余 restTotalNum\n\n              that.totalNum = data[i].totalNum;\n              ring_series = [{\n                'value': data[i].usedTotalNum,\n                'name': '已使用数量'\n              }, {\n                'value': data[i].restTotalNum,\n                'name': '未使用数量'\n              }];\n            } else if (data[i].dateYear == 1) {\n              left_lend.push(data[i].sourceName);\n              left_series.push({\n                'value': data[i].imcomeValue,\n                'name': data[i].sourceName\n              });\n            } else if (data[i].dateYear == 0 && data[i].sourceId == 9) {\n              if (data[i].dateName) {\n                data_9[parseInt(data[i].dateName) - 1] = data[i].imcomeValue;\n              }\n            } else if (data[i].dateYear == 0 && data[i].sourceId == 10) {\n              if (data[i].dateName) {\n                data_10[parseInt(data[i].dateName) - 1] = data[i].imcomeValue;\n              }\n            } else if (data[i].dateYear == 0 && data[i].sourceId == 11) {\n              if (data[i].dateName) {\n                data_11[parseInt(data[i].dateName) - 1] = data[i].imcomeValue;\n              }\n            } else if (data[i].dateYear == 0 && data[i].sourceId == 12) {\n              if (data[i].dateName) {\n                data_12[parseInt(data[i].dateName) - 1] = data[i].imcomeValue;\n              }\n            }\n          }\n\n          var data_type = [data_9, data_10, data_11, data_12];\n\n          for (var x = 0; x < sourceMap.length; x++) {\n            right_legend.push({\n              'name': sourceMap[x].sourceName,\n              'icon': 'circle'\n            });\n            right_series.push({\n              'name': sourceMap[x].sourceName,\n              'type': 'line',\n              'data': data_type[x]\n            });\n          }\n\n          that.EchartsRing(ring_series);\n          left_lend = left_lend.reverse();\n          that.EchartsRing_bottom_left(left_lend, left_series);\n          that.MoreLine(right_legend, right_series);\n        }\n      });\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.removeEventListener('resize', this.resizeHandler);\n  },\n  methods: {\n    // TabClick(index){\n    // this.default_bar = index\n    // },\n    EchartsRing: function EchartsRing(ring_series) {\n      var that = this;\n      that.ehcart1 = _echarts.default.init(document.getElementById('echartsbox')); // color: ['#89A2FF','#A2BCFF','#FF9F9C','#FFDC79'],//扇形区域以及列表颜色\n\n      var option = {\n        title: {\n          show: ring_series.length < 1,\n          textStyle: {\n            color: '#909399',\n            fontWeight: 'normal',\n            fontSize: 14\n          },\n          text: '暂无数据',\n          left: 'center',\n          top: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          // formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n          hoverAnimation: true,\n          formatter: function formatter(params) {\n            var result = ''; // result =params.seriesName+''+\"</br>\"\n\n            result += params.seriesName + \"</br>\" + params.marker + \" \" + params.data.name + \" : \" + params.data.value + '(' + params.percent + '%' + ')' + \"</br>\";\n            return result;\n          }\n        },\n        legend: {\n          orient: 'vertical',\n          icon: \"circle\",\n          x: '75%',\n          y: 'center',\n          data: ['已使用数量', '未使用数量']\n        },\n        color: ['#89A2FF', '#FF9F9C'],\n        // 扇形区域以及列表颜色\n        series: [{\n          name: '一卡通',\n          type: 'pie',\n          legendHoverLink: true,\n          // radius: ['38%', '68%'],\n          // center:[\"50%\",'60%'],\n          center: ['40%', '55%'],\n          radius: ['30%', '50%'],\n          minAngle: 5,\n          // 最小的扇区角度（0 ~ 360），用于防止某个值过小导致扇区太小影响交互\n          avoidLabelOverlap: true,\n          // 是否启用防止标签重叠策略\n          hoverAnimation: true,\n          // 是否开启 hover 在扇区上的放大动画效\n          labelLine: {\n            // 设置延长线的长度\n            normal: {\n              show: true,\n              length: 15 // 设置延长线的长度\n              // length2: 10,//设置第二段延长线的长度\n\n            }\n          },\n          label: {\n            normal: {\n              show: true,\n              formatter: function formatter(params) {\n                var result = ''; // result =params.seriesName+''+\"</br>\"\n\n                result += params.data.value + '(' + params.percent + '%' + ')';\n                return result;\n              }\n            },\n            emphasis: {\n              show: true,\n              textStyle: {// fontSize:'16',\n                // fontWeight:'bold'\n              }\n            }\n          },\n          data: ring_series\n        }]\n      };\n      that.ehcart1.setOption(option);\n      window.addEventListener('resize', that.resizeHandler);\n    },\n    EchartsRing_bottom_left: function EchartsRing_bottom_left(data_legend, data_series) {\n      // var data_legend = ['餐饮','零食','酒店','其他']\n      // var data_series = [\n      //   {value:335, name:'餐饮'},\n      //   {value:310, name:'零食'},\n      //   {value:234, name:'酒店'},\n      //   {value:135, name:'其他'}\n      // ]\n      var that = this;\n      that.ehcart2 = _echarts.default.init(document.getElementById('echartslinecolumn'));\n      var option = {\n        title: {\n          show: data_legend.length < 1 && data_series.length < 1,\n          textStyle: {\n            color: '#909399',\n            fontWeight: 'normal',\n            fontSize: 14\n          },\n          text: '暂无数据',\n          left: 'center',\n          top: 'center'\n        },\n        tooltip: {\n          trigger: 'item',\n          // formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n          hoverAnimation: true,\n          formatter: function formatter(params) {\n            var result = ''; //  result =params.seriesName+''+\"</br>\" ;\n\n            result += params.seriesName + \"</br>\" + params.marker + \" \" + params.data.name + \" : \" + params.data.value + '(' + params.percent + '%' + ')' + \"</br>\";\n            return result;\n          }\n        },\n        legend: {\n          orient: 'vertical',\n          icon: \"circle\",\n          x: '80%',\n          y: 'center',\n          data: data_legend\n        },\n        color: ['#FFDC79', '#FF9F9C', '#A2BCFF', '#89A2FF'],\n        //扇形区域以及列表颜色\n        series: [{\n          name: '消费来源',\n          type: 'pie',\n          center: ['40%', '55%'],\n          radius: ['30%', '50%'],\n          minAngle: 5,\n          // 最小的扇区角度（0 ~ 360），用于防止某个值过小导致扇区太小影响交互\n          avoidLabelOverlap: true,\n          // 是否启用防止标签重叠策略\n          hoverAnimation: true,\n          // 是否开启 hover 在扇区上的放大动画效\n          labelLine: {\n            // 设置延长线的长度\n            normal: {\n              show: true,\n              length: 15 // 设置延长线的长度\n              // length2: 10,//设置第二段延长线的长度\n\n            }\n          },\n          label: {\n            normal: {\n              show: true,\n              formatter: function formatter(params) {\n                var result = ''; //  result =params.seriesName+''+\"</br>\"\n\n                result += params.data.value + '(' + params.percent + '%' + ')';\n                return result;\n              }\n            },\n            emphasis: {\n              show: true,\n              textStyle: {// fontSize:'16',\n                // fontWeight:'bold'\n              }\n            }\n          },\n          data: data_series\n        }]\n      };\n      that.ehcart2.setOption(option);\n      window.addEventListener('resize', that.resizeHandler);\n    },\n    MoreLine: function MoreLine(right_legend, right_series) {\n      var that = this;\n      var rightx = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12']; // var right_legend = [\n      //       {name:'餐饮',icon:'circle'},\n      //       {name:'零食',icon:'circle'},\n      //       {name:'酒店',icon:'circle'},\n      //       {name:'其他',icon:'circle'}\n      //     ]\n      // var right_series = [\n      //     {\n      //       name:'餐饮',\n      //       type:'line',\n      //       data:data_9\n      //     },\n      //     {\n      //       name:'零食',\n      //       type:'line',\n      //       // yAxisIndex: 1,\n      //       data:data_10\n      //     },\n      //     {\n      //       name:'酒店',\n      //       type:'line',\n      //       // yAxisIndex: 1,\n      //       data:data_11\n      //     },\n      //     {\n      //       name:'其他',\n      //       type:'line',\n      //       // yAxisIndex: 1,\n      //       data:data_12\n      //     }\n      //   ]\n\n      var option = {\n        title: {\n          show: right_legend.length < 1 && right_series.length < 1,\n          textStyle: {\n            color: '#909399',\n            fontWeight: 'normal',\n            fontSize: 14\n          },\n          text: '暂无数据',\n          left: 'center',\n          top: 'center'\n        },\n        grid: {\n          left: '20',\n          right: '70',\n          bottom: '50'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: function formatter(params) {\n            var result = '';\n            result = params[0].name + '月各店消费额' + \"</br>\";\n            params.forEach(function (item) {\n              result += item.marker + \" \" + item.seriesName + \" : \" + item.value + \"</br>\";\n            });\n            return result;\n          } // \"{b}月会员积分情况 <br/>{a} :{c}<br/>{a1}: {c1}\"\n          // a ---legend第一个 名字  a1---第二个名字\n          // b --- 第一个表x轴\n          // b1 --- 第二标x轴\n          // c  ---第一个y轴值\n          // c1 ---第二个y轴值\n\n        },\n        legend: {\n          // 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\n          data: right_legend\n        },\n        color: ['#89A2FF', '#A2BCFF', '#FF9F9C', '#FFDC79'],\n        //扇形区域以及列表颜色\n        xAxis: [{\n          type: 'category',\n          name: '日期(月)',\n          splitLine: {\n            show: false\n          },\n          data: rightx,\n          // axisPointer: {\n          // type: 'shadow'//轴线是线还是柱形   'line' 直线指示器 'shadow' 阴影指示器'none' 无指示器\n          // }, \n          axisTick: {\n            alignWithLabel: true,\n            show: false\n          }\n        }],\n        yAxis: [{\n          type: 'value',\n          name: '积分(分)',\n          splitLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          axisLabel: {\n            formatter: '{value}'\n          }\n        }],\n        series: right_series\n      };\n      that.ehcart3 = _echarts.default.init(document.getElementById('moreline'));\n      option.grid.left = this.getYWidth(Math.max.apply(null, option.series[0].data), Math.max.apply(null, option.series[0].data));\n      that.ehcart3.setOption(option);\n      window.addEventListener('resize', that.resizeHandler);\n    },\n    resizeHandler: function resizeHandler() {\n      if (this.ehcart1) {\n        this.ehcart1.resize();\n      }\n\n      if (this.ehcart2) {\n        this.ehcart2.resize();\n      }\n\n      if (this.ehcart3) {\n        this.ehcart3.resize();\n      }\n    },\n    getYWidth: function getYWidth(data1, data2) {\n      // 根据数值长度计算显示宽度\n      return ((data1 > data2 ? data1.toString().length : data2.toString().length) * 12).toString();\n    }\n  }\n};\nexports.default = _default;",null]}
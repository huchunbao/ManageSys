{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\energy\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\energy\\index.vue","mtime":1578275513691},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\\\u529E\\u516C\\\\projectwc\\\\\\u524D\\u7AEF\\\\ManageSys\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _echarts = _interopRequireDefault(require(\"echarts\"));\n\nvar _car = require(\"@/api/car\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'Traffic',\n  data: function data() {\n    return {\n      yearData: {\n        electricity: 0,\n        electricityMoney: 0,\n        water: 0,\n        waterMoney: 0,\n        gas: 0,\n        gasMoney: 0\n      },\n      seldata: '2',\n      echarts2: null,\n      echarts3: null,\n      echarts4: null,\n      option2: {\n        color: ['#86a0ff', '#c2d8ff'],\n        title: {\n          text: '今年每月水能源消耗统计',\n          left: '10',\n          top: '0',\n          textStyle: {\n            color: 'black',\n            fontWeight: 'normal',\n            fontSize: 13\n          }\n        },\n        legend: {\n          data: [{\n            name: '立方',\n            icon: 'circle'\n          }, {\n            name: '金额',\n            icon: 'circle'\n          }]\n        },\n        grid: {\n          left: '20',\n          right: '70',\n          bottom: '50'\n        },\n        tooltip: {\n          trigger: 'item',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: function formatter(param) {\n            var dan = param.seriesName === '金额' ? '元' : '吨';\n            var data = '水能源消耗统计<br>' + param.name + ':' + param.data + '' + dan;\n            return data;\n          }\n        },\n        dataset: {},\n        xAxis: {\n          data: [],\n          type: 'category',\n          name: '日期(月)'\n        },\n        yAxis: {\n          type: 'value',\n          axisLabel: {\n            formatter: '{value} '\n          },\n          splitLine: {\n            show: true\n          }\n        },\n        series: [{\n          type: 'bar',\n          name: '立方',\n          data: [300, 260, 450, 500, 230, 320, 340, 400, 240]\n        }, {\n          type: 'bar',\n          name: '金额',\n          data: [1800, 1560, 2700, 3000, 1380, 1920, 2040, 2400, 1440]\n        }]\n      },\n      option3: {\n        color: ['#315dfc', '#a0bbff'],\n        title: {\n          text: '今年每月电能消耗统计',\n          left: '10',\n          top: '0',\n          textStyle: {\n            color: 'black',\n            fontWeight: 'normal',\n            fontSize: 13\n          }\n        },\n        grid: {\n          left: '20',\n          right: '70',\n          bottom: '50'\n        },\n        tooltip: {\n          trigger: 'item',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: function formatter(param) {\n            var dan = param.seriesName === '金额' ? '元' : '度';\n            var data = '电能消耗统计<br>' + param.name + ':' + param.data + '' + dan;\n            return data;\n          }\n        },\n        calculable: true,\n        legend: {\n          data: [{\n            name: '度数'\n          }, {\n            name: '金额',\n            icon: 'circle'\n          }]\n        },\n        xAxis: [{\n          type: 'category',\n          data: [],\n          axisLine: {\n            show: true\n          },\n          axisTick: {\n            show: false\n          },\n          // axisLabel: { formatter: '{value} 月' },\n          name: '日期(月)'\n        }],\n        yAxis: [{\n          type: 'value'\n        }, {\n          show: false,\n          type: 'value',\n          name: '金额'\n        }],\n        series: [{\n          name: '度数',\n          type: 'line',\n          yAxisIndex: 1,\n          data: [100, 210, 330, 450, 363, 410, 203, 234, 230]\n        }, {\n          barWidth: '43%',\n          name: '金额',\n          type: 'bar',\n          data: [120, 252, 396, 540, 435.6, 492, 243.6, 280.8, 276]\n        }]\n      },\n      option4: {\n        title: {\n          text: '今年每月燃气能源消耗统计',\n          left: '10',\n          top: '0',\n          textStyle: {\n            color: 'black',\n            fontWeight: 'normal',\n            fontSize: 13\n          }\n        },\n        color: ['#86a0ff', '#c2d8ff'],\n        legend: {\n          data: [{\n            name: '立方',\n            icon: 'circle'\n          }, {\n            name: '金额',\n            icon: 'circle'\n          }]\n        },\n        grid: {\n          left: '20',\n          right: '70',\n          bottom: '50'\n        },\n        tooltip: {\n          trigger: 'item',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: function formatter(param) {\n            var dan = param.seriesName === '金额' ? '元' : 'm3';\n            var data = '燃气能源消耗统计<br>' + param.name + ':' + param.data + '' + dan;\n            return data;\n          }\n        },\n        xAxis: {\n          data: [],\n          type: 'category',\n          name: '日期(月)'\n        },\n        yAxis: {\n          type: 'value',\n          axisLabel: {\n            formatter: '{value} '\n          },\n          splitLine: {\n            show: true\n          }\n        },\n        series: [{\n          type: 'bar',\n          name: '立方',\n          data: [300, 260, 450, 640, 500, 430, 320, 280, 240]\n        }, {\n          type: 'bar',\n          name: '金额',\n          data: [780, 676, 1170, 1664, 1300, 1118, 832, 728, 624]\n        }]\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getAllData();\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.removeEventListener('resize', this.resizeHandler);\n  },\n  methods: {\n    getDataList: function getDataList(url) {\n      return new Promise(function (resolve, reject) {\n        (0, _car.getList)(url, null).then(function (response) {\n          resolve(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    getAllData: function getAllData() {\n      var _this = this;\n\n      var that = this;\n      this.getDataList('/sourceeat/loadSourceData').then(function (data) {\n        var now = new Date();\n        var month = now.getMonth() + 1;\n        var xAxis = new Array(month).fill(0);\n        that.option2.series[0].data = new Array(month).fill(0);\n        that.option2.series[1].data = new Array(month).fill(0);\n        that.option3.series[0].data = new Array(month).fill(0);\n        that.option3.series[1].data = new Array(month).fill(0);\n        that.option4.series[0].data = new Array(month).fill(0);\n        that.option4.series[1].data = new Array(month).fill(0);\n\n        for (var index = 0; index < month; index++) {\n          xAxis[index] = index + 1 + '月';\n        }\n\n        that.option2.xAxis.data = xAxis;\n        that.option3.xAxis[0].data = xAxis;\n        that.option4.xAxis.data = xAxis;\n\n        if (data && data.data) {\n          data.data.forEach(function (item) {\n            if (parseInt(item.dateName) > month && item.dateYear === 1) return;\n\n            if (parseInt(item.disType) === 0) {\n              switch (parseInt(item.typeNum)) {\n                case 0:\n                  if (item.dateYear === 0) {\n                    that.yearData.electricity = item.sourceValue;\n                  } else {\n                    that.option2.series[0].data[parseInt(item.dateName) - 1] = item.sourceValue;\n                  }\n\n                  break;\n\n                case 1:\n                  if (item.dateYear === 0) {\n                    that.yearData.water = item.sourceValue;\n                  } else {\n                    that.option3.series[0].data[parseInt(item.dateName) - 1] = item.sourceValue;\n                  }\n\n                  break;\n\n                case 2:\n                  if (item.dateYear === 0) {\n                    that.yearData.gas = item.sourceValue;\n                  } else {\n                    that.option4.series[0].data[parseInt(item.dateName) - 1] = item.sourceValue;\n                  }\n\n                  break;\n\n                default:\n                  break;\n              }\n            } else {\n              switch (parseInt(item.typeNum)) {\n                case 0:\n                  if (item.dateYear === 0) {\n                    that.yearData.electricityMoney = item.sourceValue;\n                  } else {\n                    that.option2.series[1].data[parseInt(item.dateName) - 1] = item.sourceValue;\n                  }\n\n                  break;\n\n                case 1:\n                  if (item.dateYear === 0) {\n                    that.yearData.waterMoney = item.sourceValue;\n                  } else {\n                    that.option3.series[1].data[parseInt(item.dateName) - 1] = item.sourceValue;\n                  }\n\n                  break;\n\n                case 2:\n                  if (item.dateYear === 0) {\n                    that.yearData.gasMoney = item.sourceValue;\n                  } else {\n                    that.option4.series[1].data[parseInt(item.dateName) - 1] = item.sourceValue;\n                  }\n\n                  break;\n\n                default:\n                  break;\n              }\n            }\n          });\n        }\n\n        that.option2.grid.left = _this.getYWidth(Math.max.apply(null, that.option2.series[0].data), Math.max.apply(null, that.option2.series[0].data));\n        that.option3.grid.left = _this.getYWidth(Math.max.apply(null, that.option3.series[0].data), Math.max.apply(null, that.option3.series[0].data));\n        that.option4.grid.left = _this.getYWidth(Math.max.apply(null, that.option4.series[0].data), Math.max.apply(null, that.option4.series[0].data));\n        that.echaers4fund();\n        that.echaers3fund();\n        that.echaers2fund();\n        window.addEventListener('resize', _this.resizeHandler); // 图表自适应\n      });\n    },\n    echaers2fund: function echaers2fund() {\n      this.echarts2 = _echarts.default.init(document.getElementById('echarts2'));\n      this.echarts2.setOption(this.option2);\n    },\n    echaers3fund: function echaers3fund() {\n      this.echarts3 = _echarts.default.init(document.getElementById('echarts3'));\n      this.echarts3.setOption(this.option3);\n    },\n    echaers4fund: function echaers4fund() {\n      this.echarts4 = _echarts.default.init(document.getElementById('echarts4'));\n      this.echarts4.setOption(this.option4);\n    },\n    resizeHandler: function resizeHandler() {\n      if (this.echarts2) {\n        this.echarts2.resize();\n      }\n\n      if (this.echarts3) {\n        this.echarts3.resize();\n      }\n\n      if (this.echarts4) {\n        this.echarts4.resize();\n      }\n    },\n    getYWidth: function getYWidth(data1, data2) {\n      // 根据数值长度计算显示宽度\n      return ((data1 > data2 ? data1.toString().length : data2.toString().length) * 12).toString();\n    }\n  }\n};\nexports.default = _default;",null]}
{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\structure\\galasys.vue?vue&type=template&id=57951c58&scoped=true&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\structure\\galasys.vue","mtime":1577252313187},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"glasys-container default-container\">\n  <el-row :gutter=\"15\" class=\"first-row mini-form\">\n    <el-col :span=\"5\">\n      <div class=\"company bg\">\n        <div class=\"company-title\">\n          <p class=\"title f-l\">公司</p>\n          <p class=\"p-btn f-r\" :class=\"{'btn-disable': !companyDelBtn}\" @click=\"deleteCompany()\">删除</p>\n          <p class=\"p-btn f-r\" :class=\"{'btn-disable': !isGalasys}\" @click=\"addCompany(1)\">增加子公司</p>\n          <p class=\"p-btn f-r\" @click=\"addCompany(0)\">增加</p>\n        </div>\n        <el-scrollbar class=\"company-tree\">\n          <el-tree\n            ref=\"companyTree\"\n            :data=\"companyData\"\n            :props=\"companyProps\"\n            node-key=\"companyId\"\n            highlight-current\n            accordion\n            @node-click=\"companyClick\"\n          >\n          </el-tree>\n        </el-scrollbar>\n      </div>\n    </el-col>\n    <el-col :span=\"10\">\n      <div class=\"company-info bg\">\n        <el-form ref=\"companyForm\" :model=\"companyForm\" autocomplete=\"on\" size=\"mini\">\n          <div class=\"company-title\">\n            <p class=\"title f-l\">公司信息</p>\n            <el-button round size=\"mini\" class=\"el-button-default company-info-btn\" @click=\"editCompanyInfo\">{{ companyForm.btnName }}</el-button>\n            <div v-if=\"companyForm.status===0\" class=\"f-r license-time\">\n              许可时间\n              <div>{{ companyForm.date[0] }}</div>\n              至\n              <div>{{ companyForm.date[1] }}</div>\n            </div>\n          </div>\n          <el-row class=\"company-info-item\">\n            <el-col :span=\"3\">\n              <p class=\"lable\">名称</p>\n              <p class=\"lable\">性质</p>\n              <p class=\"lable\">类型</p>\n              <p v-if=\"companyForm.status===1\" class=\"lable\">许可时间</p>\n            </el-col>\n            <el-col v-if=\"companyForm.status===0\" :span=\"11\">\n              <p>{{ companyForm.name }}</p>\n              <p>{{ companyForm.nature }}</p>\n              <p>{{ companyForm.type }}</p>\n            </el-col>\n            <el-col v-else :span=\"11\" class=\"company-info-row1\">\n              <el-form-item>\n                <el-input v-model=\"companyForm.name\" clearable placeholder=\"公司名称\"></el-input>\n              </el-form-item>\n              <el-form-item>\n                <el-dropdown type=\"primary\" placement=\"bottom-start\" plain @command=\"handleDD(1, ...arguments)\">\n                  <el-button class=\"el-dropdown-link\">\n                    {{ companyForm.nature }}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\n                  </el-button>\n                  <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item v-for=\"nature in natureList\" :key=\"nature.val\" :command=\"nature\">{{ nature.name }}</el-dropdown-item>\n                  </el-dropdown-menu>\n                </el-dropdown>\n              </el-form-item>\n              <el-form-item>\n                <el-dropdown type=\"primary\" placement=\"bottom-start\" plain @command=\"handleDD(2, ...arguments)\">\n                  <el-button class=\"el-dropdown-link\">\n                    {{ companyForm.type }}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\n                  </el-button>\n                  <el-dropdown-menu slot=\"dropdown\">\n                    <el-dropdown-item v-for=\"type in typeList\" :key=\"type.val\" :command=\"type\">{{ type.name }}</el-dropdown-item>\n                  </el-dropdown-menu>\n                </el-dropdown>\n              </el-form-item>\n              <el-form-item>\n                <el-date-picker\n                  v-model=\"companyForm.date\"\n                  type=\"daterange\"\n                  range-separator=\"至\"\n                  start-placeholder=\"开始日期\"\n                  end-placeholder=\"结束日期\"\n                  align=\"center\"\n                  class=\"date-picker\"\n                >\n                </el-date-picker>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"3\">\n              <p class=\"lable info-lable\">负责人</p>\n              <p class=\"lable info-lable\">手机号</p>\n              <p class=\"lable email\">邮箱</p>\n            </el-col>\n            <el-col v-if=\"companyForm.status===0\" :span=\"7\">\n              <p>{{ companyForm.principal }}</p>\n              <p>{{ companyForm.mobile }}</p>\n              <p>{{ companyForm.email }}</p>\n            </el-col>\n            <el-col v-else :span=\"7\" class=\"company-info-row2\">\n              <el-form-item>\n                <el-input v-model=\"companyForm.principal\" clearable placeholder=\"负责人\"></el-input>\n              </el-form-item>\n              <el-form-item>\n                <el-input v-model=\"companyForm.mobile\" maxlength=\"11\" clearable placeholder=\"手机号\"></el-input>\n              </el-form-item>\n              <el-form-item>\n                <el-input v-model=\"companyForm.email\" clearable placeholder=\"邮箱\"></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </el-form>\n      </div>\n    </el-col>\n    <el-col :span=\"9\">\n      <div class=\"review bg\">\n        <div class=\"company-title\">\n          <p class=\"title f-l\">审批 / 反审</p>\n        </div>\n        <div class=\"review-item\">\n          <div class=\"review-step\">\n            <div class=\"step-icon\">\n              <img :src=\"reviewCompanyStatus.firstAuditstatus > 0 ? reviewOk : reviewDefault\">\n            </div>\n            <div class=\"step-line\">\n              <div></div>\n              <div></div>\n            </div>\n            <div class=\"step-icon\">\n              <img :src=\"reviewCompanyStatus.secondAuditstatus > 0 ? reviewOk : reviewDefault\">\n            </div>\n            <div class=\"step-line\">\n              <div></div>\n              <div></div>\n            </div>\n            <div class=\"step-icon\">\n              <img :src=\"reviewCompanyStatus.thirdAuditstatus > 0 ? reviewOk : reviewDefault\">\n            </div>\n          </div>\n          <div class=\"step-btn\">\n            <div>\n              <p class=\"lable\">一级审批</p>\n              <el-button v-if=\"reviewUser.auditorLevel === 1 && !isGalasys && selectCompanyId > 0\" round size=\"mini\" class=\"el-button-default\" :disabled=\"reviewCompanyStatus.secondAuditstatus >= 0\" @click=\"antiReview()\">反审</el-button>\n              <div style=\"height:5px;\"></div>\n              <el-button v-if=\"reviewUser.auditorLevel === 1 && !isGalasys && selectCompanyId > 0\" round type=\"primary\" size=\"mini\" class=\"el-button-default\" :disabled=\"getReviewDisable(1)\" @click=\"review()\">审批</el-button>\n              <el-tooltip :content=\"'审批意见:' + reviewCompanyContent.first\" placement=\"top\">\n                <div class=\"review-status\" :class=\"getReviewClass(reviewCompanyStatus.firstAuditstatus)\">{{ reviewDic(reviewCompanyStatus.firstAuditstatus, 1) }}</div>\n              </el-tooltip>\n            </div>\n            <div>\n              <p class=\"lable\">二级审批</p>\n              <el-button v-if=\"reviewUser.auditorLevel === 2 && !isGalasys && selectCompanyId > 0\" round size=\"mini\" class=\"el-button-default\" :disabled=\"reviewCompanyStatus.thirdAuditstatus >= 0\" @click=\"antiReview()\">反审</el-button>\n              <div style=\"height:5px;\"></div>\n              <el-button v-if=\"reviewUser.auditorLevel === 2 && !isGalasys && selectCompanyId > 0\" round type=\"primary\" size=\"mini\" class=\"el-button-default\" :disabled=\"getReviewDisable(2)\" @click=\"review()\">审批</el-button>\n              <el-tooltip :content=\"'审批意见:' + reviewCompanyContent.second\" placement=\"top\">\n                <div class=\"review-status\" :class=\"getReviewClass(reviewCompanyStatus.secondAuditstatus)\">{{ reviewDic(reviewCompanyStatus.secondAuditstatus, 2) }}</div>\n              </el-tooltip>\n            </div>\n            <div>\n              <p class=\"lable\">三级审批</p>\n              <el-button v-if=\"reviewUser.auditorLevel === 3 && !isGalasys && selectCompanyId > 0\" round size=\"mini\" class=\"el-button-default\" @click=\"antiReview()\">反审</el-button>\n              <div style=\"height:5px;\"></div>\n              <el-button v-if=\"reviewUser.auditorLevel === 3 && !isGalasys && selectCompanyId > 0\" round type=\"primary\" size=\"mini\" class=\"el-button-default\" :disabled=\"getReviewDisable(3)\" @click=\"review()\">审批</el-button>\n              <el-tooltip :content=\"'审批意见:' + reviewCompanyContent.third\" placement=\"top\">\n                <div class=\"review-status\" :class=\"getReviewClass(reviewCompanyStatus.thirdAuditstatus)\">{{ reviewDic(reviewCompanyStatus.thirdAuditstatus, 3) }}</div>\n              </el-tooltip>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-col>\n  </el-row>\n  <el-row :gutter=\"15\" class=\"second-row\">\n    <el-col :span=\"5\">\n      <div class=\"company bg\">\n        <div class=\"company-title\">\n          <p class=\"title f-l\">部门</p>\n          <p class=\"p-btn f-r\" :class=\"{'btn-disable': !isGalasys}\" @click=\"addDepartment(1)\">修改</p>\n          <p class=\"p-btn f-r\" :class=\"{'btn-disable': !isGalasys}\" @click=\"deleteDepartment()\">删除</p>\n          <p class=\"p-btn f-r\" :class=\"{'btn-disable': !isGalasys}\" @click=\"addDepartment(0)\">增加</p>\n        </div>\n        <el-scrollbar class=\"company-tree\">\n          <el-tree\n            ref=\"departmentTree\"\n            :data=\"departmentData\"\n            :props=\"departmentProps\"\n            node-key=\"id\"\n            highlight-current\n            accordion\n            @node-click=\"departmentClick\"\n          >\n          </el-tree>\n        </el-scrollbar>\n      </div>\n    </el-col>\n    <el-col :span=\"7\">\n      <div class=\"company bg user-wapper\">\n        <div class=\"company-title\">\n          <p class=\"title f-l\">账号</p>\n          <el-button round size=\"mini\" :disabled=\"!isGalasys\" :class=\"['company-info-btn', { 'el-button-default': isGalasys }]\" @click=\"addUser(0)\">增加</el-button>\n        </div>\n        <div class=\"user-table\">\n          <el-table\n            v-loading=\"userLoading\"\n            :data=\"userList\"\n            :row-key=\"userList.id\"\n            border\n            header-row-class-name=\"car-table-header\"\n            row-class-name=\"car-table-item\"\n            max-height=\"100%\"\n            height=\"100%\"\n          >\n            <el-table-column prop=\"cusName\" label=\"姓名\" width=\"80\" />\n            <el-table-column prop=\"roleList[0].showName\" label=\"角色\" width=\"80\" />\n            <el-table-column label=\"操作\" width=\"auto\">\n              <template slot-scope=\"scope\">\n                <div class=\"modify-btn\">\n                  <p class=\"p-btn\" :class=\"{'btn-disable': !isGalasys}\" @click=\"updateUserRole(scope)\">修改角色</p>\n                  <p class=\"p-btn\" :class=\"{'btn-disable': !isGalasys}\" @click=\"updateUser(scope)\">修改</p>\n                  <p class=\"p-btn\" :class=\"{'btn-disable': !isGalasys}\" @click=\"deleteUserById(scope)\">删除</p>\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n      </div>\n      <div class=\"company bg role-wapper\">\n        <div class=\"company-title\">\n          <p class=\"title f-l\">角色</p>\n          <el-button round size=\"mini\" :disabled=\"!isGalasys\" :class=\"['company-info-btn', { 'el-button-default': isGalasys }]\" @click=\"addRole()\">增加</el-button>\n        </div>\n        <div class=\"user-table\">\n          <el-table\n            v-loading=\"roleLoading\"\n            :data=\"roleList\"\n            :row-key=\"roleList.id\"\n            border\n            header-row-class-name=\"car-table-header\"\n            row-class-name=\"car-table-item\"\n            max-height=\"100%\"\n            height=\"100%\"\n          >\n            <el-table-column prop=\"showName\" label=\"角色\" width=\"120\" />\n            <el-table-column label=\"操作\" width=\"auto\">\n              <template slot-scope=\"scope\">\n                <div class=\"modify-btn\">\n                  <p class=\"p-btn\" :class=\"{'btn-disable': !isGalasys}\" @click=\"updateRole(scope.row)\">修改</p>\n                  <p class=\"p-btn\" :class=\"{'btn-disable': !isGalasys}\" @click=\"deleteRole(scope.row)\">删除</p>\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n      </div>\n    </el-col>\n    <el-col :span=\"12\">\n      <div class=\"company bg\">\n        <div class=\"company-title\" style=\"height:30px;\">\n          <p class=\"title f-l\">授权</p>\n        </div>\n        <div class=\"auth-wapper\">\n          <tree-transfer ref=\"treeTransfer\" :select-company-id=\"selectCompanyId\" :btn-status=\"authStatus\" @authend=\"authLoading = false\"></tree-transfer>\n          <el-button round size=\"mini\" :loading=\"authLoading\" :disabled=\"authBtnStatus\" :class=\"['company-info-btn', 'auth-edit-btn', { 'el-button-default': !authBtnStatus }]\" @click=\"authEdit\">{{ authBtnText }}</el-button>\n        </div>\n      </div>\n    </el-col>\n  </el-row>\n  <el-dialog :visible.sync=\"showAddCompany\" :title=\"addCompanyType === 0 ? '新增公司':'新增子公司'\" width=\"730px\" class=\"mini-form\">\n    <el-form v-if=\"showAddCompany\" ref=\"addCompanyForm\" :model=\"addCompanyForm\" :rules=\"addCompanyRules\" label-width=\"80px\" hide-required-asterisk autocomplete=\"on\" class=\"add-company-dlg\" size=\"mini\">\n      <el-row :gutter=\"15\">\n        <el-col :span=\"12\">\n          <el-form-item label=\"名称\" prop=\"name\">\n            <el-input v-model=\"addCompanyForm.name\" clearable placeholder=\"公司名称\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"性质\">\n            <el-dropdown type=\"primary\" placement=\"bottom-start\" plain @command=\"handleDD(3, ...arguments)\">\n              <el-button class=\"el-dropdown-link\">\n                {{ addCompanyForm.nature }}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\n              </el-button>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item v-for=\"nature in natureList\" :key=\"nature.val\" :command=\"nature\">{{ nature.name }}</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </el-form-item>\n          <el-form-item label=\"类型\" prop=\"type\">\n            <el-dropdown type=\"primary\" placement=\"bottom-start\" plain @command=\"handleDD(4, ...arguments)\">\n              <el-button class=\"el-dropdown-link\">\n                {{ addCompanyForm.type }}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\n              </el-button>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item v-for=\"type in typeList\" :key=\"type.val\" :command=\"type\">{{ type.name }}</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          </el-form-item>\n          <el-form-item label=\"许可时间\" prop=\"companyName\">\n            <el-date-picker\n              v-model=\"addCompanyForm.date\"\n              type=\"daterange\"\n              range-separator=\"至\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              align=\"center\"\n              class=\"date-picker\"\n            >\n            </el-date-picker>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"负责人\" prop=\"principal\">\n            <el-input v-model=\"addCompanyForm.principal\" clearable placeholder=\"负责人\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"手机号\" prop=\"mobile\">\n            <el-input v-model=\"addCompanyForm.mobile\" maxlength=\"11\" clearable placeholder=\"手机号\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-model=\"addCompanyForm.email\" type=\"email\" clearable placeholder=\"邮箱\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button round size=\"mini\" class=\"el-button-default\" @click=\"cancelCompany\">取消</el-button>\n      <el-button round size=\"mini\" :loading=\"addCompanyLoading\" type=\"primary\" @click=\"submitCompany\">确定</el-button>\n    </span>\n  </el-dialog>\n  <el-dialog :visible.sync=\"showDepartment\" :title=\"addDepartmentType === 0 ? '新增部门':'修改部门'\" width=\"30%\">\n    <el-form v-if=\"showDepartment\" ref=\"addDepartmentForm\" :model=\"addDepartmentForm\" :rules=\"addDepartmentRules\" hide-required-asterisk label-width=\"80px\" autocomplete=\"on\" size=\"mini\" class=\"add-company-dlg\">\n      <el-form-item v-if=\"addDepartmentType === 1\" label=\"原名称\">\n        <el-input v-model=\"addDepartmentForm.oldName\" :disabled=\"true\" placeholder=\"原名称\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"部门名称\" prop=\"name\">\n        <el-input v-model=\"addDepartmentForm.name\" clearable placeholder=\"部门名称\"></el-input>\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button round size=\"mini\" class=\"el-button-default\" @click=\"cancelDepartment\">取消</el-button>\n      <el-button round size=\"mini\" type=\"primary\" @click=\"submitDepartment\">确定</el-button>\n    </span>\n  </el-dialog>\n  <el-dialog :visible.sync=\"showUser\" :title=\"addUserType === 0 ? '新增用户':'修改用户'\" width=\"700px\">\n    <account v-if=\"showUser\" :user-info=\"addUserInfo\" @canceluser=\"showUser=false\" @submituser=\"submitUser\"></account>\n  </el-dialog>\n  <el-dialog :visible.sync=\"showUserRole\" title=\"修改用户角色\" width=\"300px\" class=\"mini-form\">\n    <el-form v-if=\"showUserRole\" label-width=\"80px\" hide-required-asterisk autocomplete=\"on\" class=\"add-company-dlg\" size=\"mini\">\n      <el-form-item label=\"角色名称\">\n        <el-dropdown type=\"primary\" placement=\"bottom-start\" plain @command=\"handleRoleDD(...arguments)\">\n          <el-button class=\"el-dropdown-link\">\n            {{ userRoleForm.showName }}<i class=\"el-icon-caret-bottom el-icon--right\"></i>\n          </el-button>\n          <el-dropdown-menu slot=\"dropdown\">\n            <el-dropdown-item v-for=\"role in roleList\" :key=\"role.id\" :command=\"role\">{{ role.showName }}</el-dropdown-item>\n          </el-dropdown-menu>\n        </el-dropdown>\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button round size=\"mini\" class=\"el-button-default\" @click=\"cancelUserRole\">取消</el-button>\n      <el-button round size=\"mini\" type=\"primary\" @click=\"submitUserRole\">确定</el-button>\n    </span>\n  </el-dialog>\n  <el-dialog :visible.sync=\"showRole\" :title=\"addRoleType === 0 ? '新增角色':'修改角色'\" width=\"80%\">\n    <role v-if=\"showRole\" ref=\"roleDlg\" :add-type=\"addRoleType\" :role-id=\"addRoleId\" :company-id=\"selectCompanyId\" :role-name=\"addRoleName\" @cancelrole=\"showRole=false\" @submitrole=\"submitRole\"></role>\n  </el-dialog>\n  <el-dialog :visible.sync=\"showReview\" :title=\"reviewType === 0 ? '审批通过':'反审'\" width=\"400px\">\n    <el-form v-if=\"showReview\" label-width=\"80px\" hide-required-asterisk autocomplete=\"off\" class=\"add-company-dlg\" size=\"mini\">\n      <el-form-item label=\"审批\">\n        <el-select v-model=\"reviewStatus\" placeholder=\"请选择\" style=\"width:100%;\">\n          <el-option label=\"通过\" value=\"通过\"></el-option>\n          <el-option label=\"不通过\" value=\"不通过\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"审批意见\">\n        <el-input v-model=\"reviewText\" type=\"textarea\" placeholder=\"请输入审批意见\" rows=\"3\"></el-input>\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button round size=\"mini\" class=\"el-button-default\" @click=\"cancelReview\">取消</el-button>\n      <el-button round :loading=\"reviewLoading\" size=\"mini\" type=\"primary\" @click=\"submitReview\">确定</el-button>\n    </span>\n  </el-dialog>\n</div>\n",null]}
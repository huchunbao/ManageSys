{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\traffic\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\traffic\\index.vue","mtime":1576638136612},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport echarts from 'echarts'\nimport { get } from '@/api/axios'\nexport default {\n  name: 'Traffic',\n  data() {\n    return {\n      seldata: '2',\n      zt: 0,\n      zc: 0,\n      kc: 0,\n      zzc: 0,\n      option1: {\n        title: {\n          text: '车位占用率',\n          left: 'center',\n          bottom: '20%',\n          textStyle: {\n            fontSize: '10'\n          }\n        },\n        textStyle: {\n          fontSize: '8'\n        },\n        tooltip: {\n          formatter: '{a} <br/>{c}%'\n        },\n        series: [\n          {\n            radius: '65%',\n            name: '车位占用率',\n            type: 'gauge',\n            axisLine: {\n              lineStyle: {\n                color: [[0.3, '#E9EAF3'], [0.7, '#A2BCFF'], [1, '#FF9F9C']],\n                width: '20'\n              }\n            },\n            axisLabel: {\n              distance: '-9'\n            },\n            pointer: {\n              length: '60%',\n              width: '5%'\n            },\n            detail: {\n              formatter: '{value}%',\n              fontSize: '10'\n            },\n            data: [{ value: 62 }],\n            axisTick: {\n              show: false\n            },\n            splitLine: {\n              show: false\n            }\n          }\n        ]\n      },\n      option2: {\n        title: {\n          text: '本月车辆来源排行',\n          left: '10',\n          top: '10',\n          textStyle: { fontSize: '1rem', color: 'rgba(29,33,51,1)' }\n        },\n        grid: {\n          left: '10%',\n          right: '10%',\n          top: '20%',\n          bottom: '10%'\n        },\n        tooltip: {\n          // backgroundColor: 'rgba(245, 245, 245, 0.8)',\n          // borderWidth: 1,\n          // borderColor: '#ccc',\n          // padding: 10,\n          // textStyle: {\n          //   color: '#000'\n          // },\n          // position: function(pos, params, el, elRect, size) {\n          //   var obj = { top: 10 }\n          //   obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30\n          //   return obj\n          // },\n          type: 'axios',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: '车辆来源排行<br>{b}:{c}辆'\n        },\n        xAxis: {\n          type: 'category',\n          data: [],\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          name: '地区'\n        },\n        yAxis: {\n          type: 'value',\n          name: '数量（辆）'\n        },\n        series: [\n          {\n            data: [],\n            type: 'bar',\n            color: '#A2BCFF',\n            barMaxWidth: '35'\n            // itemStyle: {\n            //   normal: {\n            //     label: {\n            //       show: true, // 开启显示\n            //       position: 'top', // 在上方显示\n            //       textStyle: {\n            //         // 数值样式\n            //         color: '#A2BCFF',\n            //         fontSize: 10\n            //       }\n            //     }\n            //   }\n            // }\n          }\n        ]\n      },\n      option3: {\n        title: {\n          text: '上月车流量统计',\n          left: '10',\n          top: '10',\n          textStyle: { fontSize: '1rem', color: 'rgba(29,33,51,1)' }\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          },\n          formatter: '车流量统计<br>{b}日:{c}辆'\n        },\n        legend: {\n          data: ['停车场1', '停车场2', '停车场3'],\n          top: '30',\n          right: '30'\n        },\n        grid: {\n          left: '3%',\n          right: '12%',\n          bottom: '3%',\n          containLabel: true\n        },\n        xAxis: {\n          type: 'category',\n          name: '日期（日）',\n          data: []\n        },\n        yAxis: {\n          type: 'value',\n          name: '数量（辆）'\n        },\n        series: [\n          {\n            name: '停车场',\n            type: 'bar',\n            stack: '总量',\n            data: [],\n            barMaxWidth: '15',\n            color: '#a2bcff'\n            // itemStyle: {\n            //   normal: {\n            //     label: {\n            //       show: true, // 开启显示\n            //       position: 'top', // 在上方显示\n            //       textStyle: {\n            //         // 数值样式\n            //         color: '#a2bcff',\n            //         fontSize: 10\n            //       }\n            //     }\n            //   }\n            // }\n          }\n        ]\n      },\n      option4: {\n        title: {\n          text: '上月车位使用率',\n          left: '10',\n          top: '10',\n          textStyle: { fontSize: '1rem', color: 'rgba(29,33,51,1)' }\n        },\n        grid: {\n          left: '10%',\n          right: '12%',\n          top: '20%',\n          bottom: '10%'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          },\n          // backgroundColor: 'rgba(245, 245, 245, 0.8)',\n          // borderWidth: 1,\n          // borderColor: '#ccc',\n          // padding: 10,\n          // textStyle: {\n          //   color: '#000'\n          // },\n          // position: function(pos, params, el, elRect, size) {\n          //   var obj = { top: 10 }\n          //   obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30\n          //   return obj\n          // },\n          formatter: '车位使用率<br>{b}日:{c}%'\n        },\n        xAxis: {\n          type: 'category',\n          name: '日期（日）',\n          data: [],\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          }\n        },\n        yAxis: {\n          type: 'value',\n          name: '使用率（%）'\n        },\n        series: [\n          {\n            data: [],\n            type: 'line',\n            itemStyle: { color: '#89a2ff' }\n          }\n        ]\n      }\n    }\n  },\n  watch: {\n    seldata() {\n      // console.log(this.seldata)\n    }\n  },\n  mounted() {\n    this.shu()\n  },\n  methods: {\n    shu() {\n      const that = this\n      get('/parkinfo/getTrafficInfo', { cpid: this.$store.state.user.companyId }).then(res => {\n        that.zt = res.data.parkmessagemap.parkcount\n        that.zc = res.data.parkmessagemap.Place\n        that.kc = res.data.parkmessagemap.feeePlace\n        that.zzc = res.data.parkmessagemap.usedPlace\n        that.option3.series[0].data = res.data.monthcountarray\n        that.option4.series[0].data = []\n        that.option3.xAxis.data = []\n        this.option1.series[0].data[0].value = ((res.data.parkmessagemap.usedPlace / res.data.parkmessagemap.Place) * 100).toFixed(2)\n        for (var i = 0; i < res.data.monthcountarray.length; i++) {\n          that.option3.xAxis.data.push('' + (i + 1))\n        }\n        that.option2.series[0].data = []\n        for (var x = 0; x < res.data.parkareamap.length; x++) {\n          that.option2.xAxis.data.push(res.data.parkareamap[x].areaname)\n          that.option2.series[0].data.push(res.data.parkareamap[x].count)\n        }\n        for (var y = 0; y < res.data.monthperarray.length; y++) {\n          that.option4.xAxis.data.push('' + (y + 1))\n          if (res.data.monthperarray[y] === null) {\n            that.option4.series[0].data.push(0)\n          } else {\n            that.option4.series[0].data.push((res.data.monthperarray[y] * 1).toFixed(2))\n          }\n        }\n        this.echaers2fund()\n        this.echaers4fund()\n        this.echaers3fund()\n        this.echaers1fund()\n      })\n    },\n    echaers1fund() {\n      const echarts1 = echarts.init(document.getElementById('echarts1'))\n      echarts1.setOption(this.option1, 111)\n      window.addEventListener('resize', () => {\n        echarts1.resize()\n      })\n    },\n    echaers2fund() {\n      const echarts2 = echarts.init(document.getElementById('echarts2'))\n      echarts2.setOption(this.option2)\n      window.addEventListener('resize', () => {\n        echarts2.resize()\n      })\n    },\n    echaers3fund() {\n      const echarts3 = echarts.init(document.getElementById('echarts3'))\n      echarts3.setOption(this.option3)\n      window.addEventListener('resize', () => {\n        echarts3.resize()\n      })\n    },\n    echaers4fund() {\n      const echarts4 = echarts.init(document.getElementById('echarts4'))\n      echarts4.setOption(this.option4)\n      window.addEventListener('resize', () => {\n        echarts4.resize()\n      })\n    }\n  }\n}\n",null]}
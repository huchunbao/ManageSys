{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\alarm\\cjjl.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\alarm\\cjjl.vue","mtime":1578016623669},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { get, post } from '../../api/axios.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      $index: '',\r\n      name: '',\r\n      ip2: '',\r\n      arrdata: [],\r\n      multipleTable: [],\r\n      arr: [],\r\n      all: 0, //      总页数\r\n      cur: 1,\r\n      data: {},\r\n      multipleSelection: [],\r\n      xt: '',\r\n      zhdata: {},\r\n      zh: false,\r\n      xgdata: {},\r\n      xg: false,\r\n      pickerOptions2: {\r\n        shortcuts: [\r\n          {\r\n            text: '最近一周',\r\n            onClick(picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          },\r\n          {\r\n            text: '最近一个月',\r\n            onClick(picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          },\r\n          {\r\n            text: '最近三个月',\r\n            onClick(picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      shij: [],\r\n      value4: '',\r\n      options2: [],\r\n      options: [\r\n        {\r\n          value: '选项1',\r\n          label: '全部'\r\n        },\r\n        {\r\n          value: '选项2',\r\n          label: '主动报警'\r\n        },\r\n        {\r\n          value: '选项3',\r\n          label: '触发报警'\r\n        },\r\n        {\r\n          value: '选项4',\r\n          label: '异常报警'\r\n        },\r\n        {\r\n          value: '选项5',\r\n          label: '断电报警'\r\n        },\r\n        {\r\n          value: '选项6',\r\n          label: '超速报警'\r\n        },\r\n        {\r\n          value: '选项7',\r\n          label: '越界报警'\r\n        },\r\n        {\r\n          value: '选项8',\r\n          label: '超时报警'\r\n        },\r\n        {\r\n          value: '选项9',\r\n          label: '求助报警'\r\n        }\r\n      ],\r\n      value5: [],\r\n      value11: [],\r\n      cities: [\r\n        {\r\n          value1: 'haikang',\r\n          label: '垃圾桶'\r\n        },\r\n        {\r\n          value1: 'dahua',\r\n          label: '密度摄像机'\r\n        },\r\n        {\r\n          value1: 'huawei',\r\n          label: '客流相机'\r\n        }\r\n      ],\r\n      value6: '',\r\n      value10: [],\r\n      zhfadata: {}\r\n    }\r\n  },\r\n  mounted() {\r\n    this.shua()\r\n    get('/alarmInfo/selectCountAlarmSource', {\r\n      cpid: this.$store.state.user.companyId\r\n    }).then(response => {\r\n      this.options2 = response\r\n    })\r\n    get('/alarmInfo/selectCountAlarmType', {\r\n      cpid: this.$store.state.user.companyId\r\n    }).then(res => {\r\n      this.options = res\r\n    })\r\n  },\r\n  methods: {\r\n    clickok() {\r\n      this.zh = false\r\n      this.zhdata = []\r\n      this.xg = false\r\n    },\r\n    zhfa(i) {\r\n      this.zh = true\r\n      this.zhfadata = i\r\n    },\r\n    xgfa(i) {\r\n      console.log(i)\r\n      this.xg = true\r\n      var that = this\r\n      get('/alarmInfo/selectById', { aid: i.id }).then(res => {\r\n        console.log(res)\r\n        that.xgdata = res[0]\r\n      })\r\n    },\r\n    sou() {\r\n      var that = this\r\n      var data = {\r\n        cpid: this.$store.state.user.companyId,\r\n        pageNumber: that.cur - 1,\r\n        pageSize: 6,\r\n        alarmSource: this.data.xt,\r\n        alarmType: this.data.alarmType,\r\n        handlerName: this.data.name\r\n      }\r\n      console.log(data)\r\n      if (that.shij.length > 0) {\r\n        console.log(that.shij)\r\n        data.startTime = this.shi2(that.shij[0])\r\n        data.endTime = this.shi2(that.shij[1])\r\n      }\r\n      get('/alarmInfo/selectByClear', data).then(res => {\r\n        that.arrdata = res.content\r\n        that.all = res.totalElements\r\n        console.log(res, 100)\r\n      })\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val\r\n    },\r\n    btnClick(data) {\r\n      console.log(data)\r\n      this.cur = data\r\n      this.shua()\r\n    },\r\n    shua() {\r\n      var that = this\r\n      get('/alarmInfo/selectAllPage', {\r\n        cpid: this.$store.state.user.companyId,\r\n        pageNumber: that.cur - 1,\r\n        pageSize: 6\r\n      }).then(res => {\r\n        that.arrdata = res.content\r\n        this.all = res.totalElements\r\n        console.log(res, 12212)\r\n      })\r\n    },\r\n    shi(value) {\r\n      var s = value / 1000\r\n      var m = parseInt(s % 60)\r\n      s = parseInt(s / 60)\r\n      var f = parseInt(s % 60)\r\n      s = parseInt(s / 60)\r\n      var date = (s < 10 ? '0' + s : s) + ':' + (f < 10 ? '0' + f : f) + ':' + (m < 10 ? '0' + m : m)\r\n      return date\r\n    },\r\n    shi2(date) {\r\n      var n = date.getFullYear()\r\n      var y = date.getMonth() + 1\r\n      var r = date.getDate()\r\n      var s = date.getHours() < 10 ? '0' + date.getHours() : date.getHours()\r\n      var f = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()\r\n      var m = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds()\r\n      return n + '-' + y + '-' + r + ' ' + s + ':' + f + ':' + m\r\n    },\r\n    content() {\r\n      post('/alarmInfo/saveAlarmContent', { aid: this.zhfadata.id, alarmContent: this.data.xr }).then(res => {\r\n        this.shua()\r\n        this.clickok()\r\n        console.log(res, 12212)\r\n      })\r\n    }\r\n  }\r\n}\r\n",null]}
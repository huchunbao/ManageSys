{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\patrol\\luxian.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\patrol\\luxian.vue","mtime":1577252313734},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport echarts from 'echarts'\nimport { get } from '@/api/axios'\n\nexport default {\n  name: 'PassenGer',\n  data() {\n    return {\n      zoom: 16,\n      center: [116.336496, 39.942178],\n      mapStyle: 'amap://styles/whitesmoke',\n      // 客流情况趋势图切换1代表客流情况2代表趋势图\n      activeName: 'qing',\n      linecolor: '#3F6AFF',\n      linestyle: 'dashed',\n      arrdata: [\n        {\n          name: '南巡路线',\n          kssj: '07:00',\n          jssj: '11:00',\n          xcsc: '240分钟',\n          xcy: '小明',\n          lxfs: '132xxxx0908/ 132xxxx0928'\n        },\n        {\n          name: '东巡路线',\n          kssj: '07:00',\n          jssj: '11:00',\n          xcsc: '240分钟',\n          xcy: '李明',\n          lxfs: '132xxxx0908/ 132xxxx0928'\n        },\n        {\n          name: '场馆路线',\n          kssj: '07:00',\n          jssj: '11:00',\n          xcsc: '240分钟',\n          xcy: '王红红',\n          lxfs: '132xxxx0908/ 132xxxx0928'\n        }\n      ],\n      markers: [],\n      option1: {\n        title: {\n          text: '本月巡查历史统计',\n          x: 'left',\n          textStyle: { fontSize: '1rem', color: 'rgba(29,33,51,1)' }\n        },\n        tooltip: {\n          trigger: 'item',\n          formatter: '本月{b}:{c}次({d}%)'\n        },\n        legend: {\n          orient: 'vertical',\n          y: 'center',\n          right: '10%',\n          data: ['准时率', '早巡率', '晚巡率', '漏巡率']\n        },\n        series: [\n          {\n            name: '客流量',\n            type: 'pie',\n            radius: ['25%', '40%'],\n            center: ['38%', '50%'],\n            data: [\n              { value: 335, name: '准时率', itemStyle: { color: '#89a2ff' }},\n              { value: 310, name: '早巡率', itemStyle: { color: '#a2bcff' }},\n              { value: 234, name: '晚巡率', itemStyle: { color: '#c5d6ff' }},\n              { value: 135, name: '漏巡率', itemStyle: { color: '#e4e5ff' }}\n            ],\n            label: {\n              position: 'outside',\n              formatter: '{d}%'\n            },\n            itemStyle: {\n              emphasis: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\n              }\n            }\n          }\n        ]\n      }\n    }\n  },\n  mounted() {\n    this.drawLine()\n    this.geng()\n  },\n  methods: {\n    handleClick(tab, event) {\n      console.log(tab, event)\n    },\n    drawLine() {\n      const echarts1 = echarts.init(document.getElementById('echarts1'))\n      echarts1.setOption(this.option1)\n    },\n    linecontent(index) {\n      return '<div class=\"line-marker\" style=\"height: 20px; width: 20px; border-radius: 10px; background-color: rgba(63,106,255, .7); text-align: center; line-height: 20px; margin-top: 20px; color: #fff;\">' + (index + 1) + '</div>'\n    },\n    geng() {\n      get('/mngCircuitInfo/getmngcircuitinfobytype', { cpid: this.$store.state.user.companyId, typeid: 1 }).then(res => {\n        console.log(res)\n        var data = res.data\n        this.markers = []\n        for (var i = 0; i < data.length; i++) {\n          var path = []\n          for (var y = 0; y < data[i].circuitpointlist.length; y++) {\n            path.push([data[i].circuitpointlist[y].circuitPointLon, data[i].circuitpointlist[y].circuitPointLat])\n          }\n          this.markers.push({\n            position: [data[i].circuitpointlist[data[i].circuitpointlist.length - 1].circuitPointLon, data[i].circuitpointlist[data[i].circuitpointlist.length - 1].circuitPointLat],\n            label: {\n              content: data[i].circuitName,\n              offset: [25, 0]\n            },\n            path: path,\n            fanglist: data[i].circuitpointlist\n          })\n        }\n      })\n      get('/mngpatrol/getmonthPerbycpid', { cpid: this.$store.state.user.companyId }).then(res => {\n        this.option1.series[0].data[0].value = res.data[0]['准点数'] ? res.data[0]['准时率'] : 0\n        this.option1.series[0].data[1].value = res.data[0]['早到数'] ? res.data[0]['早到数'] : 0\n        this.option1.series[0].data[2].value = res.data[0]['晚点数'] ? res.data[0]['晚点数'] : 0\n        this.option1.series[0].data[3].value = res.data[0]['漏巡数'] ? res.data[0]['漏巡数'] : 0\n        this.drawLine()\n      })\n      get('/mngpatrol/getMngPatrolPlanlist', { cpid: this.$store.state.user.companyId }).then(res => {\n        this.arrdata = res.data\n      })\n    }\n  }\n}\n",null]}
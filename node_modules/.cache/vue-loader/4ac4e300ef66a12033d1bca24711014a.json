{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\patrol\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\patrol\\index.vue","mtime":1578287501894},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { get } from '@/api/axios'\nexport default {\n  name: 'About',\n  data() {\n    return {\n      // 分页\n      lx: '',\n      bc: [new Date(2019, 9, 1), new Date()],\n      zdl: '',\n      xzrq: '',\n      mes: '',\n      sjlx: '1',\n      pagesize: 1,\n      chatab: 1,\n      pageNumber: 10,\n      arr: [],\n      lxx: [],\n      //    分页\n      all: 0, //      总页数\n      cur: 1\n    }\n  },\n  computed: {\n  },\n  watch: {\n    chatab() {\n      this.sou()\n    },\n    sjlx() {\n      this.cur = 1\n      this.sou()\n    }\n  },\n  mounted() {\n    this.shua()\n  },\n  methods: {\n    btnClick(data) {\n      console.log(data)\n      this.cur = data\n      this.sou()\n    },\n    shua() {\n      get('/mngCircuitInfo/getmngcircuitinfobytype', { cpid: this.$store.state.user.companyId, typeid: 1 }).then(res => {\n        this.lxx = res.data\n        this.lx = this.lxx[0].id\n        this.sou()\n      })\n      // console.log(this.cur, this.arrdata)\n      // this.arrdata = []\n      // for (var i = 0; i < 10; i++) {\n      //   if (i < this.arr.length && this.arr[i + (this.cur * 8) - 8]) {\n      //     this.arrdata.push(this.arr[i + (this.cur * 8) - 8])\n      //   }\n      // }\n    },\n    sou() {\n      if (this.chatab === 1) {\n        var data = {\n          circuitid: this.lx,\n          pageNumber: this.cur - 1,\n          pageSize: 10,\n          starttime: this.shi2(this.bc[0]),\n          endtime: this.shi2(this.bc[1])\n        }\n        if (this.zdl !== '') {\n          data.equimentid = this.zdl\n        }\n        get('/mngpatrol/getMngPatrolLogPointlist', data).then(res => {\n          this.arr = res.data.content\n          this.all = res.data.totalElements\n          for (var i = 0; i < this.arr.length; i++) {\n            this.arr[i].planTime = this.arr[i].planTime.trim().split(/\\s+/)\n            this.arr[i].arriveTime = this.arr[i].arriveTime.trim().split(/\\s+/)\n          }\n          console.log(this.arr, 12321)\n        })\n      } else {\n        get('/mngpatrol/getPerlist', { circuitid: this.lx, datetype: this.sjlx, pageNumber: this.cur - 1, pageSize: 10, starttime: this.shi2(this.bc[0]), endtime: this.shi2(this.bc[1]) }).then(res => {\n          this.arr = res.data\n          this.all = res.data[0]['总条数']\n          for (var i = 0; i < this.arr.length; i++) {\n            this.arr[i]['日期'] = this.arr[i]['日期'].trim().split(/\\s+/)\n            this.arr[i].yue = this.arr[i]['日期'][0].substring(0, this.arr[i]['日期'][0].length - 3)\n            this.arr[i]['准点率'] = this.arr[i]['准点率'].toFixed(2)\n          }\n        })\n      }\n    },\n    shi2(date) {\n      var n = date.getFullYear()\n      var y = date.getMonth() + 1\n      var r = date.getDate()\n      var s = date.getHours() < 10 ? '0' + date.getHours() : date.getHours()\n      var f = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()\n      var m = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds()\n      return n + '-' + y + '-' + r + ' ' + s + ':' + f + ':' + m\n    }\n  }\n}\n",null]}
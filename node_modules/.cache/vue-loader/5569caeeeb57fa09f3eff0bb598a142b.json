{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\alarm\\history.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\alarm\\history.vue","mtime":1576811949738},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { get } from '../../api/axios.js'\nexport default {\n  data() {\n    return {\n      name: '',\n      ip2: '',\n      arrdata: [],\n      multipleTable: [],\n      arr: [],\n      pagesize: 1,\n      pageNumber: 10,\n      all: 0, //      总页数\n      cur: 1,\n      data: {},\n      multipleSelection: [],\n      xt: '',\n      zhdata: {},\n      zh: false,\n      xg: false,\n      xgdata: {},\n      // xg: false,\n      pickerOptions2: {\n        shortcuts: [\n          {\n            text: '最近一周',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\n              picker.$emit('pick', [start, end])\n            }\n          },\n          {\n            text: '最近一个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\n              picker.$emit('pick', [start, end])\n            }\n          },\n          {\n            text: '最近三个月',\n            onClick(picker) {\n              const end = new Date()\n              const start = new Date()\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\n              picker.$emit('pick', [start, end])\n            }\n          }\n        ]\n      },\n      shij: [new Date(2019, 9, 1), new Date()],\n      value4: '',\n      options2: [],\n      options: [\n        {\n          value: '选项1',\n          label: '全部'\n        },\n        {\n          value: '选项2',\n          label: '主动报警'\n        },\n        {\n          value: '选项3',\n          label: '触发报警'\n        },\n        {\n          value: '选项4',\n          label: '异常报警'\n        },\n        {\n          value: '选项5',\n          label: '断电报警'\n        },\n        {\n          value: '选项6',\n          label: '超速报警'\n        },\n        {\n          value: '选项7',\n          label: '越界报警'\n        },\n        {\n          value: '选项8',\n          label: '超时报警'\n        },\n        {\n          value: '选项9',\n          label: '求助报警'\n        }\n      ],\n      value5: [],\n      value11: [],\n      cities: [\n        {\n          value1: 'haikang',\n          label: '垃圾桶'\n        },\n        {\n          value1: 'dahua',\n          label: '密度摄像机'\n        },\n        {\n          value1: 'huawei',\n          label: '客流相机'\n        }\n      ],\n      value6: '',\n      value10: []\n    }\n  },\n  mounted() {\n    this.shua()\n    get('/alarmInfo/selectCountAlarmSource', {}).then(response => {\n      this.options2 = response\n    })\n    get('/alarmInfo/selectCountAlarmType', {}).then(res => {\n      this.options = res\n    })\n    // var that = this\n    // get('/alarmInfo/selectAllPage', {\n    //  pageNumber: that.cur - 1,\n    // pageSize: 6\n    // }).then(res => {\n    //   that.arrdata = res.content\n    //   that.all = res.totalElements\n    // })\n  },\n  methods: {\n    clickok() {\n      this.zh = false\n      this.zhdata = []\n      this.xg = false\n      this.xgdata = []\n    },\n    zhfa(i) {\n      console.log(i)\n      this.zh = true\n      this.zhdata = this.arr[i]\n    },\n    xgfa(i) {\n      console.log(i)\n      this.xg = true\n      var that = this\n      get('/alarmInfo/selectById', { aid: i.id }).then(res => {\n        console.log(res)\n        that.xgdata = res[0]\n      })\n    },\n    sou() {\n      var that = this\n      var data = {\n        pageNumber: that.cur - 1,\n        pageSize: 8,\n        alarmSource: this.data.xt,\n        alarmType: this.data.alarmType,\n        handlerName: this.data.name,\n        startTime: this.shi2(that.shij[0]),\n        endTime: this.shi2(that.shij[1])\n      }\n      console.log(data)\n      get('/alarmInfo/selectByClear', data).then(res => {\n        that.arrdata = res.content\n        this.all = res.totalElements\n        console.log(res, 100)\n      })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    btnClick(data) {\n      console.log(data)\n      this.cur = data\n      this.shua()\n    },\n    shua() {\n      var that = this\n      get('/alarmInfo/selectAllPage', {\n        pageNumber: that.cur - 1,\n        pageSize: 6\n      }).then(res => {\n        that.arrdata = res.content\n        this.all = res.totalElements\n        console.log(res, 12212)\n      })\n    },\n    shi(value) {\n      var s = value / 1000\n      var m = parseInt(s % 60)\n      s = parseInt(s / 60)\n      var f = parseInt(s % 60)\n      s = parseInt(s / 60)\n      var date = (s < 10 ? '0' + s : s) + ':' + (f < 10 ? '0' + f : f) + ':' + (m < 10 ? '0' + m : m)\n      return date\n    },\n    shi2(date) {\n      var n = date.getFullYear()\n      var y = date.getMonth() + 1\n      var r = date.getDate()\n      var s = date.getHours() < 10 ? '0' + date.getHours() : date.getHours()\n      var f = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()\n      var m = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds()\n      return n + '-' + y + '-' + r + ' ' + s + ':' + f + ':' + m\n    }\n  }\n}\n",null]}
{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\map\\routeinstall.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\map\\routeinstall.vue","mtime":1576638137245},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport VueAMap from 'vue-amap'\n\nvar amapManager = new VueAMap.AMapManager()\nexport default {\n  name: 'Map',\n  data() {\n    return {\n      tank: '',\n      name: '',\n      bei: '',\n      zoom: 16,\n      center: [116.336496, 39.942178],\n      mapStyle1: 'amap://styles/whitesmoke',\n      activeName: 'qing',\n      tape: 1,\n      amapManager,\n      events: {},\n      overlayGroups: [],\n      data: [{ name: '', indt: '' }],\n      dataid: 0,\n      options: [\n        {\n          value: '1',\n          label: '游览路线'\n        },\n        {\n          value: '2',\n          label: '巡逻路线'\n        }\n      ],\n      value: '',\n      options2: [\n        {\n          value: '1',\n          label: '单兵'\n        },\n        {\n          value: '2',\n          label: '对讲机'\n        }\n      ],\n      value2: '',\n      line: ''\n    }\n  },\n  watch: {\n    data() {\n    }\n  },\n  created() {\n    this.addfun()\n  },\n  methods: {\n    ti() {\n      if (this.name !== '' && this.value !== '') {\n        this.$message({\n          message: '保存成功',\n          type: 'success'\n        })\n        setTimeout(() => {\n          this.tank = ''\n          this.$router.push({ path: '/maps/linjingxi' })\n        }, 2000)\n      } else {\n        this.$message({\n          message: '请认真检查填写项',\n          type: 'warning'\n        })\n      }\n    },\n    ti2() {\n      if (this.name !== '' && this.value !== '') {\n        this.name = ''\n        this.bei = ''\n        this.value = ''\n        this.value2 = ''\n        this.dataid = 0\n        this.data = [{ name: '', indt: '' }]\n        this.addmarker()\n        this.$message({\n          message: '保存成功',\n          type: 'success'\n        })\n      } else {\n        this.$message({\n          message: '请认真检查填写项',\n          type: 'warning'\n        })\n      }\n    },\n    addfun() {\n      var that = this\n      this.events = {\n        init(o) {\n          o.on('click', function(e) {\n            that.wei(e.lnglat.getLng(), e.lnglat.getLat(), that)\n          })\n        }\n      }\n    },\n    addmarker() {\n      console.log(123)\n      var that = this\n      var o = amapManager.getMap()\n      var markers = []\n      var open = []\n      o.remove(that.overlayGroups)\n      o.remove(that.line)\n      for (var i = 0; i < that.data.length; i++) {\n        if (that.data[i].indt !== '') {\n          var marker = new AMap.Marker({\n            position: that.data[i].indt,\n            text: '123',\n            icon: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_b' + (markers.length + 1) + '.png'\n          })\n          open.push(that.data[i].indt)\n          markers.push(marker)\n        }\n      }\n      if (open.length > 1) {\n        console.log(open)\n        that.line = new AMap.Polyline({\n          map: o,\n          strokeColor: '#80d8ff',\n          isOutline: true,\n          outlineColor: 'white',\n          path: open\n        })\n      }\n      this.overlayGroups = new AMap.OverlayGroup(markers)\n      o.add(that.overlayGroups)\n    },\n    wei(a, b, that) {\n      that.data[that.dataid].indt = [a, b]\n      this.addmarker()\n    },\n    handleClick(tab, event) {\n      console.log(tab, event)\n    },\n    jia() {\n      this.data.push({ name: '', indt: '' })\n      this.dataid = this.data.length - 1\n    },\n    datafun(i) {\n      console.log(i)\n      this.dataid = i\n    },\n    jian() {\n      this.data.splice(this.dataid, 1)\n      this.addmarker()\n    },\n    shang() {\n      if (this.dataid !== 0) {\n        var a = this.data[this.dataid]\n        this.data[this.dataid] = this.data[this.dataid - 1]\n        this.data[this.dataid - 1] = a\n        this.dataid -= 1\n      }\n      this.addmarker()\n    },\n    xia() {\n      if (this.dataid !== this.data.length - 1) {\n        var a = this.data[this.dataid]\n        this.data[this.dataid] = this.data[this.dataid + 1]\n        this.data[this.dataid + 1] = a\n        this.dataid += 1\n      }\n      this.addmarker()\n    }\n  }\n}\n",null]}
{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\yingzhi\\components\\CharPie.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\views\\yingzhi\\components\\CharPie.vue","mtime":1576638136649},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n\r\nimport echarts from 'echarts'\r\n// import resize from './mixins/resize'\r\nexport default {\r\n  // mixins: [resize],\r\n  props: {\r\n    className: {\r\n      type: String,\r\n      default: 'chart'\r\n    },\r\n    getdata: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          id: 'echar',\r\n          height: '100%',\r\n          width: '100%',\r\n          legend: [],\r\n          datalist: [],\r\n          color: []\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      chart: null\r\n    }\r\n  },\r\n  watch: {\r\n    getdata: {\r\n      immediate: true,\r\n      handler(val) {\r\n        this.$nextTick(() => {\r\n          this.pieCharts(val)\r\n        })\r\n      }\r\n      // deep: true\r\n    }\r\n  },\r\n  mounted() {\r\n    this.chart = echarts.init(document.getElementById(this.getdata.id))\r\n  },\r\n  beforeDestroy() {\r\n    if (!this.chart) {\r\n      return\r\n    }\r\n    this.chart.dispose()\r\n    this.chart = null\r\n  },\r\n  methods: {\r\n    pieCharts(data) {\r\n      var that = this\r\n      var datalist = data.datalist\r\n      var legend = data.legend\r\n      // var datalist = [\r\n      //   { value: 335, name: '监控' },\r\n      //   { value: 310, name: '服务器' },\r\n      //   { value: 274, name: '广播' },\r\n      //   { value: 235, name: 'LED' },\r\n      //   { value: 400, name: '报警' }\r\n      // ]\r\n      // var legend = ['监控', '服务器', '广播', 'LED', '报警']\r\n      var color = ['#587CF1', '#3AE3BC', '#FAD972', '#F88582', '#9299F3']\r\n      var option = {\r\n        title: {\r\n          left: 'center',\r\n          top: 20,\r\n          textStyle: {\r\n            color: '#ccc'\r\n          }\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n        },\r\n        legend: {\r\n          orient: 'horizontal',\r\n          icon: 'rect',\r\n          bottom: 0,\r\n          data: legend,\r\n          textStyle: { // 图例文字的样式\r\n            color: '#fff'\r\n          }\r\n        },\r\n        color: color,\r\n        series: [\r\n          {\r\n            name: '设备类型',\r\n            type: 'pie',\r\n            radius: '65%',\r\n            center: ['50%', '50%'],\r\n            data: datalist.sort(function(a, b) { return a.value - b.value }),\r\n            roseType: 'radius',\r\n            label: {\r\n              normal: {\r\n                textStyle: {\r\n                  color: '#fff'\r\n                }\r\n              }\r\n            },\r\n            labelLine: {\r\n              normal: {\r\n                lineStyle: {\r\n                  color: '#fff'\r\n                },\r\n                // smooth: 0.2, // 弯曲程度\r\n                length: 10,\r\n                length2: 20\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n      that.chart.setOption(option)\r\n      window.addEventListener('resize', function() {\r\n        that.chart.resize()\r\n      })\r\n    }\r\n  }\r\n}\r\n",null]}
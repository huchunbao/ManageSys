{"remainingRequest":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\办公\\projectwc\\前端\\ManageSys\\src\\components\\Charts\\CarChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\src\\components\\Charts\\CarChart.vue","mtime":1576638136370},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\办公\\projectwc\\前端\\ManageSys\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n\nimport echarts from 'echarts'\nimport resize from './mixins/resize'\n\nexport default {\n  mixins: [resize],\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    id: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '200px'\n    },\n    chartType: {\n      type: String,\n      default: 'xs'\n    },\n    barWidth: {\n      type: String,\n      default: 'big'\n    },\n    tipTitle: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      chart: null,\n      chartData: [],\n      colorlist: this.$store.state.settings.chartColors\n    }\n  },\n  mounted() {\n    this.chart = echarts.init(document.getElementById(this.id))\n  },\n  beforeDestroy() {\n    if (!this.chart) {\n      return\n    }\n    this.chart.dispose()\n    this.chart = null\n  },\n  methods: {\n    initChart() {\n      if (this.chart) {\n        this.chart.clear()\n      }\n      var that = this\n      const chartData = that.chartData\n      let yName = '数值'\n      let xName = ''\n      let unit = ''\n      let tooltip = {}\n      let barW = 45\n      if (that.chartType === 'jftj') {\n        unit = '分'\n        yName = '积分(分)'\n        xName = '日期(年)'\n        tooltip = {\n          formatter: function(params) {\n            var relVal = params.name + that.tipTitle + '<br /><div class=\"circle\" >' + params.marker + params.seriesName + ' : ' + params.value[1] + '分</div>'\n            return relVal\n          }\n        }\n      } else if (that.chartType === 'parking') {\n        unit = '元'\n        yName = '营业额(元)'\n        xName = '日期(月)'\n        tooltip = {\n          formatter: function(params) {\n            var relVal = params.name + that.tipTitle + '<br /><div class=\"circle\" >' + params.marker + params.seriesName + ' : ' + params.value[2] + '元</div>'\n            return relVal\n          }\n        }\n      } else if (that.chartType === 'parkingCar') {\n        unit = '辆'\n        yName = '车辆数量(辆)'\n        xName = '省(市)'\n        tooltip = {\n          formatter: function(params) {\n            var relVal = params.seriesName + '<br /><div class=\"circle\" >' + params.marker + params.name + ' : ' + params.value[1] + '辆</div>'\n            return relVal\n          }\n        }\n      } else {\n        tooltip = {\n          formatter: function(params) {\n            let toolUnit = ''\n            switch (params.name) {\n              case '行驶时长':\n              case '超速时长':\n              case '停车时长':\n                toolUnit = '(小时)'\n                break\n              case '行驶里程':\n              case '超速里程':\n              case '总里程':\n                toolUnit = '(公里)'\n                break\n              case '油耗/耗电量':\n              case '百公里油耗/能耗':\n                toolUnit = '(XL/KWH)/100KM'\n                break\n              case '最大速度':\n              case '平均速度':\n              case '最小速度':\n                toolUnit = '(km/h)'\n                break\n              case '超速次数':\n              case '停车次数':\n              case '加油/充电次数':\n              case '漏油/亏电次数':\n              case '超时停车次数':\n                toolUnit = '(次)'\n                break\n              case '趟数':\n                toolUnit = '(趟)'\n                break\n              case '加油/充电量':\n              case '总油耗/能耗':\n                toolUnit = '(L/KWH)'\n                break\n              case '漏油/亏电量':\n                toolUnit = '(L/mAH)'\n                break\n              default:\n                break\n            }\n            var relVal = '车船牌号：' + params.seriesName + '<br /><div class=\"circle\" >' + params.marker + params.name + ' : ' + params.value[params.seriesIndex + 1] + toolUnit + '</div>'\n            return relVal\n          }\n        }\n      }\n      const xData = (function() {\n        const data = []\n        if (chartData[0].length <= 1) {\n          return []\n        }\n        var datalen = chartData[0].length - 1\n        var barCount = datalen * chartData.length\n        if (that.barWidth !== 'big') {\n          if (barCount > 10) {\n            barW = 18\n          } else {\n            barW = 22\n          }\n        } else {\n          if (barCount > 10) {\n            barW = 22\n          } else {\n            barW = 40\n          }\n        }\n        for (let i = 0, j = 0; i < datalen; i++) {\n          if (j >= that.colorlist.length) {\n            j = 0\n          }\n          data.push({\n            type: 'bar',\n            barMaxWidth: barW,\n            itemStyle: {\n              normal: {\n                color: that.colorlist[j]\n              }\n            },\n            label: {\n              show: false\n            }\n          })\n          j++\n        }\n\n        return data\n      }())\n      this.chart.setOption({\n        title: {\n          show: xData.length <= 0,\n          textStyle: {\n            color: '#909399',\n            fontWeight: 'normal',\n            fontSize: 14\n          },\n          text: '暂无数据',\n          left: 'center',\n          top: 'center'\n        },\n        legend: {},\n        tooltip: tooltip,\n        grid: {\n          left: '10%',\n          right: '10%',\n          borderWidth: 0,\n          top: 50,\n          bottom: 20,\n          textStyle: {\n            color: '#fff'\n          }\n        },\n        dataset: {\n          source: chartData\n        },\n        xAxis: [{\n          name: xName,\n          type: 'category',\n          axisLine: {\n            lineStyle: {\n              color: '#90979c'\n            }\n          },\n          splitLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          splitArea: {\n            show: false\n          },\n          axisLabel: {\n            interval: 0\n          }\n        }],\n        yAxis: [{\n          name: yName,\n          type: 'value',\n          splitLine: {\n            show: false\n          },\n          axisLine: {\n            lineStyle: {\n              color: '#90979c'\n            }\n          },\n          axisTick: {\n            show: false\n          },\n          axisLabel: {\n            interval: 0,\n            formatter: '{value}' + unit\n          },\n          splitArea: {\n            show: false\n          }\n        }],\n        series: xData\n      }, true)\n\n      this.chart.resize()\n    }\n  }\n}\n",null]}